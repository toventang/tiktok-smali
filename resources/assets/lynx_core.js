(function(){"use strict";var globalThis=new Function("return this;")();globalThis.globalThis=globalThis;var __commonJS=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},require_core=__commonJS((function(t,e){function r(){}var n=null,o={};e.exports=function(t){var e=t.setTimeout;function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,t!==r&&l(t,this)}function i(t,r){for(;3===t._state;)t=t._value;if(a._onHandle&&a._onHandle(t),0===t._state)return 0===t._deferredState?(t._deferredState=1,void(t._deferreds=r)):1===t._deferredState?(t._deferredState=2,void(t._deferreds=[t._deferreds,r])):void t._deferreds.push(r);!function(t,r){e((function(){var e=1===t._state?r.onFulfilled:r.onRejected;if(null!==e){var a=function(t,e){try{return t(e)}catch(t){return n=t,o}}(e,t._value);a===o?_(r.promise,n):s(r.promise,a)}else 1===t._state?s(r.promise,t._value):_(r.promise,t._value)}))}(t,r)}function s(t,e){if(e===t)return _(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=function(t){try{return t.then}catch(t){return n=t,o}}(e);if(r===o)return _(t,n);if(r===t.then&&e instanceof a)return t._state=3,t._value=e,void p(t);if("function"==typeof r)return void l(r.bind(e),t)}t._state=1,t._value=e,p(t)}function _(t,e){t._state=2,t._value=e,a._onReject&&a._onReject(t,e),p(t)}function p(t){if(1===t._deferredState&&(i(t,t._deferreds),t._deferreds=null),2===t._deferredState){for(var e=0;e<t._deferreds.length;e++)i(t,t._deferreds[e]);t._deferreds=null}}function c(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function l(t,e){var r=!1,a=function(t,e,r){try{t(e,r)}catch(t){return n=t,o}}(t,(function(t){r||(r=!0,s(e,t))}),(function(t){r||(r=!0,_(e,t))}));r||a!==o||(r=!0,_(e,n))}return a._onHandle=null,a._onReject=null,a._noop=r,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor((function(o,s){var _=new a(r);_.then(o,s),i(t,new c(e,n,_))}))}(this,t,e);var n=new a(r);return i(this,new c(t,e,n)),n},a}})),require_es6_extensions=__commonJS((function(t,e){e.exports=function(t){var e=s(!0),r=s(!1),n=s(null),o=s(void 0),a=s(0),i=s("");function s(e){var r=new t(t._noop);return r._state=1,r._value=e,r}t.resolve=function(_){if(_ instanceof t)return _;if(null===_)return n;if(void 0===_)return o;if(!0===_)return e;if(!1===_)return r;if(0===_)return a;if(""===_)return i;if("object"==typeof _||"function"==typeof _)try{var p=_.then;if("function"==typeof p)return new t(p.bind(_))}catch(e){return new t((function(t,r){r(e)}))}return s(_)};var _=function(t){return"function"==typeof Array.from?(_=Array.from,Array.from(t)):(_=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};return t.all=function(e){var r=_(e);return new t((function(e,n){if(0===r.length)return e([]);var o=r.length;function a(i,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof t&&s.then===t.prototype.then){for(;3===s._state;)s=s._value;return 1===s._state?a(i,s._value):(2===s._state&&n(s._value),void s.then((function(t){a(i,t)}),n))}var _=s.then;if("function"==typeof _)return void new t(_.bind(s)).then((function(t){a(i,t)}),n)}r[i]=s,0==--o&&e(r)}for(var i=0;i<r.length;i++)a(i,r[i])}))},t.reject=function(e){return new t((function(t,r){r(e)}))},t.race=function(e){return new t((function(r,n){_(e).forEach((function(e){t.resolve(e).then(r,n)}))}))},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.done=function(t,e){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,(function(t){setTimeout((function(){throw t}),0)}))},t.prototype.finally=function(e){return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},t}})),require_rejection_tracking=__commonJS((function(t,e){e.exports=function(t,e,r){var n=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,t._onHandle=null,t._onReject=null}function i(t,e){return e.some((function(e){return t instanceof e}))}return{enable:function(s){s=s||{},o&&a(),o=!0;var _=0,p=0,c={};function l(t){(s.allRejections||i(c[t].error,s.whitelist||n))&&(c[t].displayId=p++,s.onUnhandled?(c[t].logged=!0,s.onUnhandled(c[t].displayId,c[t].error)):(c[t].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach((function(t){console.warn("  "+t)}))}(c[t].displayId,c[t].error)))}return t._onHandle=function(t){var e;2===t._state&&c[t._rejectionId]&&(c[t._rejectionId].logged?(e=t._rejectionId,c[e].logged&&(s.onHandled?s.onHandled(c[e].displayId,c[e].error):c[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[e].displayId+".")))):r&&r(c[t._rejectionId].timeout),delete c[t._rejectionId])},t._onReject=function(t,r){0===t._deferredState&&(t._rejectionId=_++,c[t._rejectionId]={displayId:null,error:r,timeout:e(l.bind(null,t._rejectionId),i(r,n)?100:2e3),logged:!1})},t},disable:a}}})),require_src=__commonJS((function(t,e){var r=require_core(),n=require_es6_extensions(),o=require_rejection_tracking();new Function("return this")().getPromise=e.exports.getPromise=function(t){var e=t.setTimeout,a=t.onUnhandled,i=t.clearTimeout,s=function(t){return e(t,0)},_=r({setTimeout:s});return _=n(_),_=o(_,s,i).enable({allRejections:!0,onUnhandled:a})}}));require_src();var runtime=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function _(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{_({},"")}catch(t){_=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),i=new w(n||[]);return a._invoke=function(t,e,r){var n=l;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return D()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var _=c(t,e,r);if("normal"===_.type){if(n=r.done?f:u,_.arg===d)continue;return{value:_.arg,done:r.done}}"throw"===_.type&&(n=f,r.method="throw",r.arg=_.arg)}}}(t,r,i),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=p;var l="suspendedStart",u="suspendedYield",h="executing",f="completed",d={};function v(){}function E(){}function m(){}var y={};y[a]=function(){return this};var g=Object.getPrototypeOf,A=g&&g(g(x([])));A&&A!==r&&n.call(A,a)&&(y=A);var R=m.prototype=v.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){_(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,a,i,s){var _=c(t[o],t,a);if("throw"!==_.type){var p=_.arg,l=p.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(l).then((function(t){p.value=t,i(p)}),(function(t){return r("throw",t,i,s)}))}s(_.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function C(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=c(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:D}}function D(){return{value:e,done:!0}}return E.prototype=R.constructor=m,m.constructor=E,E.displayName=_(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,_(t,s,"GeneratorFunction")),t.prototype=Object.create(R),t},t.awrap=function(t){return{__await:t}},b(T.prototype),T.prototype[i]=function(){return this},t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(p(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(R),_(R,s,"Generator"),R[a]=function(){return this},R.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var _=n.call(i,"catchLoc"),p=n.call(i,"finallyLoc");if(_&&p){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(_){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),d}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(t){Function("r","regeneratorRuntime = r")(runtime)}var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e_1,_a;function __values(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spreadArray(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}var lifeCycles=["onLoad","onShow","onHide","onReady","onDestroy","onError","onFirstScreen"],lifeCycleFun={},noop=function(){},ErrorCode;try{for(var lifeCycles_1=__values(lifeCycles),lifeCycles_1_1=lifeCycles_1.next();!lifeCycles_1_1.done;lifeCycles_1_1=lifeCycles_1.next()){var name=lifeCycles_1_1.value;lifeCycleFun[name]=noop}}catch(t){e_1={error:t}}finally{try{lifeCycles_1_1&&!lifeCycles_1_1.done&&(_a=lifeCycles_1.return)&&_a.call(lifeCycles_1)}finally{if(e_1)throw e_1.error}}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.UNKNOWN=1]="UNKNOWN",t[t.NODE_NOT_FOUND=2]="NODE_NOT_FOUND",t[t.METHOD_NOT_FOUND=3]="METHOD_NOT_FOUND",t[t.PARAM_INVALID=4]="PARAM_INVALID",t[t.SELECTOR_NOT_SUPPORTED=5]="SELECTOR_NOT_SUPPORTED"}(ErrorCode||(ErrorCode={}));var LYNX_CORE={filename:"lynx_core",slot:"unknown_commit_hash"},componentLifeCycles=["created","attached","ready","moved","detached"],DEFAULT_ENTRY="__CARD__",CARD_CONFIG_STR="__card_config_",CARD_CONFIG_THEME="theme",CARD_CONFIG_THEME_UPDATED="onThemeChanged",REACT_JS_STATE_VERSION_KEY="$$jsStateVersion",REACT_NATIVE_STATE_VERSION_KEY="$$nativeStateVersion",ShareDataSubject=function(){function t(){this.observersFunc=[]}return t.prototype.registerObserver=function(t){if(this.observersFunc.includes(t))return nativeConsole.log("Subject: Observer has been attached already.");this.observersFunc.push(t)},t.prototype.removeObserver=function(t){var e=this.observersFunc.indexOf(t);if(-1===e)return nativeConsole.log("Subject: Nonexistent observer.");this.observersFunc.splice(e,1)},t.prototype.notifyDataChange=function(t){var e,r;try{for(var n=__values(this.observersFunc),o=n.next();!o.done;o=n.next()){var a=o.value;if("function"==typeof a)try{a(t)}catch(t){nativeConsole.log("SharedData change and notifyDataChange error info:"+t)}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),_global=function(){return this||(0,eval)("this")}();_global.multiApps={},_global.currentAppId="",_global.globComponentRegistPath="",_global.sharedData={},_global.globDynamicComponentEntry=DEFAULT_ENTRY,_global.shareDataSubject=new ShareDataSubject,_global.TaroLynx={},_global.bundleSupportLoadScript=!0;var loadScript=_global.loadScript,EventEmitter=function(){function t(t){this._internal_callNativeModule=t,this._events=new Map}return t.prototype.addListener=function(t,e,r){var n=this._events.get(t);"keyboardstatuschanged"==t&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!0]),n?n.push({listener:e,context:r}):this._events.set(t,[{listener:e,context:r}])},t.prototype.removeListener=function(t,e){var r,n;if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var o=this._events.get(t),a=!1,i=0;if(Array.isArray(o)){try{for(var s=__values(o),_=s.next();!_.done;_=s.next()){if(e===_.value.listener){a=!0;break}i++}}catch(t){r={error:t}}finally{try{_&&!_.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}a&&o.splice(i,1)}"keyboardstatuschanged"==t&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!1])},t.prototype.emit=function(t,e){var r,n,o=this._events.get(t);if(Array.isArray(o))try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,_=s.listener,p=s.context;"function"==typeof _&&_.apply(p||this,e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}else nativeConsole.warn("emit event "+t+" is not register.")},t.prototype.removeAllListerners=function(t){this._events.delete(t)},t.prototype.removeAllListeners=function(t){this._events.delete(t)},t.prototype.trigger=function(t,e){var r,n,o=this._events.get(t);if(Array.isArray(o)){"string"==typeof e&&(e=JSON.parse(e));try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,_=s.listener,p=s.context;"function"==typeof _&&_.call(p||this,e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}else nativeConsole.warn("trigger event "+t+" is not register.")},t.prototype.toggle=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit(t,e)},t}(),BaseError=function(t){function e(e,r){var n=t.call(this,e)||this;return r&&(n.stack=r),n}return __extends(e,t),e}(Error),InternalError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="INTERNAL_ERROR",e}return __extends(e,t),e}(BaseError),UserError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="USER_ERROR",e}return __extends(e,t),e}(BaseError),UserValidateError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="USER_VALIDATE_ERROR",e}return __extends(e,t),e}(UserError),UserRuntimeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="USER_RUNTIME_ERROR",e}return __extends(e,t),e}(UserError),InternalRuntimeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="INTERNAL_RUNTIME_ERROR",e}return __extends(e,t),e}(InternalError),InvokeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="INVOKE_ERROR",e}return __extends(e,t),e}(InternalError),AppServiceEngineKnownError=function(t){function e(e){var r=t.call(this,"APP-SERVICE-Engine: "+e)||this;return r.type="AppServiceEngineKnownError",r}return __extends(e,t),e}(Error),ttConsole=_global.nativeConsole,LynxJSBI=_global.LynxJSBI;function hasProperty(t,e){return Object.prototype.hasOwnProperty.call(t||{},e)}function getDataType(t){var e=typeof t;return"object"!==e?e:Array.isArray(t)?"array":null==t?"null":t instanceof Date?"date":t instanceof RegExp?"regExp":"object"}function isString(t){return"string"===getDataType(t)}function isObject(t){return"object"===getDataType(t)}function isFunction(t){return"function"===getDataType(t)}function isNull(t){return null===t}function isUndefined(t){return void 0===t}function isNullOrUndef(t){return isUndefined(t)||isNull(t)}var ThirdScriptError=function(t){function e(e){var r=t.call(this,""+e)||this;return r.type="ThirdScriptError",r}return __extends(e,t),e}(Error),AppServiceSdkKnownError=function(t){function e(e){var r=t.call(this,"APP-SERVICE-SDK: + "+e)||this;return r.type="AppServiceSdkKnownError",r}return __extends(e,t),e}(Error);function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function noop$1(){}function forEachRight(t,e){if(!Array.isArray(t))throw new Error("forEachRight ERROR: first params must be array.");for(var r=t.length-1;r>=0;r--)e(t[r])}function callbackMerge(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)t[e]()}function isEmptyObject(t){return!(!t||!Object.keys(t).length)}function formatException(t){var e=eventFromException(t);return e.sdk=addSdkInfo(),e.platform="javascript",e}function addSdkInfo(){return{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"5.15.5"}],version:"5.15.5",integrations:["InboundFilters","FunctionToString","Breadcrumbs","GlobalHandlers","LinkedErrors","UserAgent"]}}function eventFromException(t){var e;return isError(t)&&(addExceptionMechanism(e=eventFromStacktrace(computeStackTrace(t)),{handled:!0,type:"generic"}),e.level="error"),e}function addExceptionMechanism(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(r){t.exception.values[0].mechanism[r]=e[r]}))}catch(t){}}var UNKNOWN_FUNCTION="?",chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/;function computeStackTrace(t){var e=null,r=null==t?void 0:t.framesToPop;try{if(e=computeStackTraceFromStackProp(t))return popFrames(e,r)}catch(t){}return{message:extractMessage(t),name:null==t?void 0:t.name,stack:[],failed:!0}}function computeStackTraceFromStackProp(t){var e,r,n,o=[],a=t.stack.split("\n");if(!t||!t.stack)return null;for(var i=0;i<a.length;++i){if(r=chrome.exec(a[i])){var s=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(e=chromeEval.exec(r[2]))&&(r[2]=e[1],r[3]=e[2],r[4]=e[3]),n={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||UNKNOWN_FUNCTION,args:s?[r[2]]:[],line:r[3]?+Number(r[3]):null,column:r[4]?+Number(r[4]):null}}else if(r=winjs.exec(a[i]))n={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+Number(r[3]),column:r[4]?+Number(r[4]):null};else{if(!(r=gecko.exec(a[i])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(e=geckoEval.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=e[1],r[4]=e[2],r[5]=""):0!==i||r[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),n={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+Number(r[4]):null,column:r[5]?+Number(r[5]):null}}!n.func&&n.line&&(n.func=UNKNOWN_FUNCTION),o.push(n)}return o.length?{message:extractMessage(t),name:t.name,stack:o}:null}function extractMessage(t){var e=null==t?void 0:t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function popFrames(t,e){try{return Object.assign({},t,{stack:t.stack.slice(e)})}catch(e){return t}}function eventFromStacktrace(t){return{exception:{values:[exceptionFromStacktrace(t)]}}}function isError(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(t,Error)}}function isInstanceOf(t,e){try{return t instanceof e}catch(t){return!1}}function exceptionFromStacktrace(t){var e=prepareFramesForEvent(t.stack),r={type:t.name,value:t.message};return(null==e?void 0:e.length)&&(r.stacktrace={frames:e}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function prepareFramesForEvent(t){if(!t||!t.length)return[];var e=t,r=e[0].func||"",n=e[e.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(e=e.slice(1)),-1!==n.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).slice(0,50).reverse()}var RUNTIME=function(t){return t.filename};function collectTags(t,e,r){return{lib_version:"unknown_build_version",version_code:"unknown_version",run_type:RUNTIME(r),extra:t,error_type:e}}function sentryReport(t,e,r){var n=t.rawError;try{nativeConsole.log("prod sentry data:",t),e.reportException(JSON.stringify(t),n.stack)}catch(t){nativeConsole.error("sentryReport error:",null==t?void 0:t.message)}}function reportError(t,e,r){var n=null!=r?r:{},o=n.runType,a=void 0===o?LYNX_CORE:o,i=n.originError,s=t.stack;t.stack=formatStack(t,a);var _=formatException(t);try{var p=collectTags(t.message,t.name,a),c=appendTags(t,createBeforeSend(_,a,null==r?void 0:r.proxy),p,a);c.rawError={stack:s,message:t.message},sentryReport(c,e,i)}catch(t){nativeConsole.error("reportError err:\n",t)}}function legacyReportError(t,e,r,n,o){return void 0===r&&(r=LYNX_CORE),reportError(t,e,{runType:r,originError:n,proxy:o})}function reportThrowError(t){var e=t.error,r=t.nativeApp,n=t.runType,o=void 0===n?LYNX_CORE:n;reportError(e,r,{originError:t.rawError,runType:o,proxy:t.proxy})}function appendTags(t,e,r,n){var o="USER_ERROR"===t.kind?"USER_ERROR":"INTERNAL_ERROR";return{sentry:__assign(__assign({},e),{tags:r}),pid:o,url:"file://"+RUNTIME(n)+".js"}}function formatStack(t,e){return t.stack?t.stack.split("\n").filter((function(t){return t.split(":").length>2})).map((function(t){if(t.includes("file://"))return t;var r=e.filename+".js";return t.replace(r,"file://"+r)})).join("\n"):""}function createBeforeSend(t,e,r){var n,o,a,i=null===(a=null===(o=null===(n=t.exception)||void 0===n?void 0:n.values)||void 0===o?void 0:o[0])||void 0===a?void 0:a.stacktrace;return(null==i?void 0:i.frames)&&i.frames.forEach((function(t){var n=e.slot,o=e.filename;-1!==t.filename.indexOf(o)?(t.filename=o+"."+n+".js",t.release=n):t.release=null==r?void 0:r.__sourcemap__release__})),t}function wrapUserFunction(t,e,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("USER_ERROR",t,r,e,n):noop$1}function wrapFunction(t,e,r,n,o){return void 0===t&&(t="INTERNAL_ERROR"),function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{return r.apply(this,a)}catch(a){var s=e+" \n"+a.message;"onError"!==r.name&&n.onError("Card "+r.name+" exec error:"+s+"\n"+a.stack);var _="INTERNAL_ERROR"===t?new InternalRuntimeError(s,a.stack):new UserRuntimeError(s,a.stack);nativeConsole.log("wrapError-"+e,_),reportError(_,n._nativeApp,{runType:o,proxy:null==n?void 0:n.__proxy})}}}function wrapInnerFunction(t,e,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("INTERNAL_ERROR",t,r,e,n):noop$1}var shallowClone=function(t){var e={};return isObject(t)&&Object.keys(t).forEach((function(r){e[r]=t[r]})),e},shallowMergeEx=function(t,e,r){void 0===r&&(r=!1);var n={};return isObject(t)&&Object.keys(t).forEach((function(e){n[e]=t[e]})),isObject(e)&&Object.keys(e).forEach((function(t){isNull(e[t])&&r||(n[t]=e[t])})),n},deepClone=function(){function t(t,e){return null!=e&&t instanceof e}var e,r,n;try{e=Map}catch(t){e=function(){}}try{r=Set}catch(t){r=function(){}}try{n=Promise}catch(t){n=function(){}}function o(a,s,_,p,c){"object"==typeof s&&(_=s.depth,p=s.prototype,c=s.includeNonEnumerable,s=s.circular);var l=[],u=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===_&&(_=1/0),function a(_,f){if(null===_)return null;if(0===f)return _;var d,v;if("object"!=typeof _)return _;if(t(_,e))d=new e;else if(t(_,r))d=new r;else if(t(_,n))d=new n((function(t,e){_.then((function(e){t(a(e,f-1))}),(function(t){e(a(t,f-1))}))}));else if(o.__isArray(_))d=[];else if(o.__isRegExp(_))d=new RegExp(_.source,i(_)),_.lastIndex&&(d.lastIndex=_.lastIndex);else if(o.__isDate(_))d=new Date(_.getTime());else{if(h&&Buffer.isBuffer(_))return d=Buffer.allocUnsafe?Buffer.allocUnsafe(_.length):new Buffer(_.length),_.copy(d),d;t(_,Error)?d=Object.create(_):void 0===p?(v=Object.getPrototypeOf(_),d=Object.create(v)):(d=Object.create(p),v=p)}if(s){var E=l.indexOf(_);if(-1!==E)return u[E];l.push(_),u.push(d)}for(var m in t(_,e)&&_.forEach((function(t,e){var r=a(e,f-1),n=a(t,f-1);d.set(r,n)})),t(_,r)&&_.forEach((function(t){var e=a(t,f-1);d.add(e)})),_){var y=void 0;v&&(y=Object.getOwnPropertyDescriptor(v,m)),y&&null==y.set||(d[m]=a(_[m],f-1))}if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(_);for(m=0;m<g.length;m++){var A=g[m];(!(b=Object.getOwnPropertyDescriptor(_,A))||b.enumerable||c)&&(d[A]=a(_[A],f-1),b.enumerable||Object.defineProperty(d,A,{enumerable:!1}))}}if(c){var R=Object.getOwnPropertyNames(_);for(m=0;m<R.length;m++){var b,T=R[m];(null==(b=Object.getOwnPropertyDescriptor(_,T))?void 0:b.enumerable)||(d[T]=a(_[T],f-1),Object.defineProperty(d,T,{enumerable:!1}))}}return d}(a,_)}function a(t){return Object.prototype.toString.call(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=function(t){return"object"==typeof t&&"[object Date]"===a(t)},o.__isArray=function(t){return"object"==typeof t&&"[object Array]"===a(t)},o.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===a(t)},o.__getRegExpFlags=i,o}(),NodeRef=function(){function t(t,e,r,n,o){this._selectorName=r,n&&n.length>0?this._ancestorSelectorNames=__spreadArray([],__read(n)):this._ancestorSelectorNames=[],this._rootComponentId=e,this._nativeLynxUIModule=t,this._isCallByRefId=o}return t.prototype.getNodeRef=function(e){return new t(this._nativeLynxUIModule,this._rootComponentId,e,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),this._isCallByRefId)},t.prototype.invoke=function(t){this._nativeLynxUIModule.invokeUIMethod(this._rootComponentId,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),t.method,Object.assign({_isCallByRefId:this._isCallByRefId},t.params),(function(e){0===e.code?t.success&&t.success(e.data):t.fail&&t.fail(e)}))},t.prototype.scrollIntoView=function(t){void 0===t&&(t=!0);var e={};if("boolean"==typeof t)e=t?{behavior:"auto",block:"start",inline:"nearest"}:{behavior:"auto",block:"end",inline:"nearest"};else{if("object"!=typeof t)throw new Error("scrollIntoView only support boolean or object");e=t}this.invoke({method:"scrollIntoView",params:{scrollIntoViewOptions:e},fail:function(t){nativeConsole.error("NodeRef.scrollIntoView failed","ErrorCode: "+t.code)}})},t}(),isNativeConsoleHasALog;function alog(t){void 0===isNativeConsoleHasALog&&(isNativeConsoleHasALog="function"==typeof nativeConsole.alog),isNativeConsoleHasALog&&nativeConsole.alog("[LynxJSSDK]"+t)}var compPrefix=1,globalId=1,propsIdMap={},nextTick;function genCompPrefix(){return String(compPrefix++)}function genPropsId(t){return propsIdMap[t]||(propsIdMap[t]=String(globalId++)),propsIdMap[t]}"iOS"===(_global.SystemInfo||{}).platform?nextTick=function(t){"function"==typeof t&&t()}:eval("nextTick = Promise.resolve().then.bind(Promise.resolve())");var nextTick$1=nextTick,dataTypeSet=new Set(["string","number","array","object","boolean","null","function"]),reserveKey=new Set(["__globalProps","SystemInfo"]),deepEqual=function(t,e){var r=getDataType(t);if(r===getDataType(e)){if("array"===r){if(t.length!==e.length)return!1;var n=!0;return t.some((function(t,r){return!(n=deepEqual(t,e[r]))})),n}if("object"===r){var o=!0,a=Object.keys(t);return a.length!==Object.keys(e).length?o=!1:(a.some((function(r){return!(o=deepEqual(t[r],e[r]))})),o)}return t===e}return!1},diffData=function(t,e,r){var n={};if(t===e)return n;if(isObject(e)){var o=isObject(t),a=Object.keys(e);if(a.length)(r&&r.length?r:a).forEach((function(r){var a=e[r];dataTypeSet.has(getDataType(a))&&(o&&deepEqual(t[r],a)||(n[r]=a))}))}return n},filterReactComponentData=function(t){var e={};return isObject(t)&&Object.keys(t).forEach((function(r){var n=t[r],o=getDataType(n);dataTypeSet.has(o)&&!reserveKey.has(r)&&(e[r]=n)})),e},Animation=function(){function t(e){this.effect=e,this.id="__lynx-inner-js-animation-"+t.count++}return t.prototype.cancel=function(){this.effect.target.canceleAnimate(this)},t.prototype.pause=function(){this.effect.target.pauseAnimate(this)},t.prototype.play=function(){this.effect.target.playAnimate(this)},t.count=0,t}(),KeyframeEffect=function(t,e,r){this.target=t,this.keyframes=e,this.options=r},Element=function(){function t(t,e,r){this._root=t,this._idSelector="#"+e,this._lynx=r,this._element=void 0}return t.prototype.ensureElement=function(){this._element||(this._element=this._lynx.createElement(this._root,this._idSelector))},t.prototype.animate=function(t,e){this.ensureElement();var r=new Animation(new KeyframeEffect(this,t,e));return this._element.animate(0,r.id,t,e),r},t.prototype.playAnimate=function(t){this._element.animate(1,t.id,void 0,void 0)},t.prototype.pauseAnimate=function(t){this._element.animate(2,t.id,void 0,void 0)},t.prototype.canceleAnimate=function(t){this._element.animate(3,t.id,void 0,void 0)},t.prototype.finishAnimate=function(t){this._element.animate(4,t.id,void 0,void 0)},t.prototype.setProperty=function(t,e){this.ensureElement(),this._element.setProperty(t,e)},t}(),ReactComponent=function(){function t(t){void 0===t&&(t={}),this.prevProps={},this.prevState={},this.nextProps={},this.nextState={},this.$init=!1,this.$cardInit=!1,this.$prefix="",this.componentId="",this.componentPath="",this.entryName="",this.globalProps=null,this.$jsStateVersion=0,this.$nativeStateVersion=0,this.state={},this.props=t,this.prevProps={},this.prevState={},this._microTaskPending=!1,this._queue=[],this._cbs=[],this.$prefix=genCompPrefix(),this.setComponentConfig(this.constructor),this.$refs=[],this.$pureData={},this._stateQueue=[]}return Object.defineProperty(t.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),t.prototype.executeJSRender=function(){var t=this._createData();return this.bindRef(),t},t.prototype.bindRef=function(){var t=this;!this.$refs||this.$refs.length<1||this.$refs.forEach((function(e){t.bindComponent(e)}))},t.prototype.bindComponent=function(t){var e=null;"native"===t.type?e=this.getNodeRef(t.refId,!0):"com"===t.type&&isString(this.$pureData[t.refId])&&(e=this._reactAppInstance._getComponent(this.$pureData[t.refId]));var r=typeof t.ref;isObject(e)&&("function"===r?t.ref.call(this,e):"object"===r&&"current"in t.ref&&(t.ref.current=e,t.ref.id=this.componentId))},t.prototype.bindSingleRef=function(t){var e=this.$refs.find((function(e){return e.refId===t}));isObject(e)&&this.bindComponent(e)},t.prototype.updateTheme=function(t,e){void 0===e&&(e=!1);var r=this;try{var n=getDataType(t);if("object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};e?Object.assign(o,t):Object.assign(o,r.theme,t),Object.keys(o).forEach((function(t){o[t]||delete o[t]})),r._nativeApp.updateData({__card_config_:{theme:o}}),r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o)}catch(t){var a=t||{},i=a.message,s=a.stack,_=new InternalRuntimeError("updateTheme error: "+i,s);reportThrowError({error:_,nativeApp:r._nativeApp,rawError:t,proxy:void 0}),r._reactAppInstance.publishGlobalError(_,"updateTheme error: "+i,s),r.componentDidCatch&&r.componentDidCatch(i)}},t.prototype.setState=function(t,e){var r,n=this,o=null;try{var a=getDataType(t);if("function"===a)o=t(n.state,n.props);else{if("object"!==a)throw new Error("setState's first param must be object/function, you pass "+a);o=t}var i=getDataType(e);if(e&&"function"!==i)throw new Error("setState's second param must be function, you pass "+i);(null===(r=this._reactAppInstance.lynx._switches)||void 0===r?void 0:r.asyncSetState)?this.setStateInternalAsync(o,e):this.setStateInternal(o,e)}catch(t){var s=t||{},_=s.message,p=s.stack,c=new InternalRuntimeError("setState error: "+_,p);reportThrowError({error:c,nativeApp:n._nativeApp,rawError:t,proxy:void 0}),n._reactAppInstance.publishGlobalError(c,"setState error: "+_,p),n.componentDidCatch&&n.componentDidCatch(_)}},t.prototype.setStateInternalAsync=function(t,e){var r=this;this._stateQueue.push({state:t,callback:e}),this._microTaskPending||(this._microTaskPending=!0,this._reactAppInstance.resolvedPromise.then((function(){r._microTaskPending=!1;var t={},e=[];r._stateQueue.forEach((function(r){var n=r.state,o=r.callback;Object.assign(t,n),e.push(o)}));r.setStateInternal(t,(function(){e.forEach((function(t){wrapUserFunction("at setState/async",r,t).bind(r)(),r._stateQueue.shift()}))}))})))},t.prototype.setStateInternal=function(t,e){var r=this;try{this.nextProps=this.props,isFunction(this.shouldComponentUpdate)?this.nextState=deepClone(this.state):this.nextState=this.state,r.nextState=Object.assign(r.nextState,t);var n=null,o={};r.$hasDerivedFunction&&(n=r.$class.getDerivedStateFromProps(r.nextProps,r.nextState),o=diffData(this.nextState,n),r.nextState=Object.assign(r.nextState,n||{}));var a=!0;if(isFunction(this.shouldComponentUpdate)&&(a=r.shouldComponentUpdate(this.nextProps,this.nextState)),this.state=this.nextState,!a){var i=Object.assign({},t,o);return void(Object.keys(i).length&&(i.$$shouldComponentUpdate=!1,this.dataQueueUpdate(r,i,wrapUserFunction("at setState/dataQueueUpdate",r,e).bind(r))))}var s=r.executeJSRender(),_=diffData(this.state,s);r.state=Object.assign(r.state,s);var p=Object.assign({},t,o,_);Object.keys(p).length&&this.dataQueueUpdate(r,p,wrapUserFunction("at setState/dataQueueUpdate",r,e).bind(r))}catch(t){var c=t||{},l=c.message,u=c.stack,h=new InternalRuntimeError("setState error: "+l,u);reportThrowError({error:h,nativeApp:r._nativeApp,rawError:t,proxy:void 0}),r._reactAppInstance.publishGlobalError(h,"setState error: "+l,u),r.componentDidCatch&&r.componentDidCatch(l)}},t.prototype.updateDataToNative=function(t){t&&Object.keys(t).length&&this.dataQueueUpdate(this,t,(function(){}))},t.prototype.dataQueueUpdate=function(t,e,r){var n,o=this,a=o._pendingState,i=t._queue;if(isNullOrUndef(a))o._pendingState=e;else for(var s in e)({}).hasOwnProperty.call(e,s)&&(a[s]=e[s]);this.$jsStateVersion+=1;var _=((n={})[REACT_JS_STATE_VERSION_KEY]=this.$jsStateVersion,n[REACT_NATIVE_STATE_VERSION_KEY]=this.$nativeStateVersion,n);Object.assign(o._pendingState,_),i.includes(o)||i.push(o),isFunction(r)&&(Array.isArray(o._cbs)||(o._cbs=[]),o._cbs.push(r.bind(o))),t._microTaskPending||(t._microTaskPending=!0,nextTick$1((function(){var e,r=[];for(t._microTaskPending=!1;e=i.pop();){var n=e.$type,o=e.componentId,a=e._cbs,s=(e.componentPath,e.entryName,e._pendingState),_=callbackMerge.bind(e,a);e._pendingState=null,e._cbs=[],r.push({type:n,componentId:o,data:s,callback:_})}t._nativeApp.batchedUpdateData(r)})))},t.prototype.registerModule=function(t,e){this._reactAppInstance._lazyCallableModules[t]=e},t.prototype.initJSModule=function(t){this._reactAppInstance=t,this.registerModule("GlobalEventEmitter",this._reactAppInstance.GlobalEventEmitter),this.registerModule("BDLynxAPIModule",this._reactAppInstance._BDLynxAPIModule);var e=(_global.BDLynxSDKCore||{}).registerNativeEvent;"function"==typeof e&&e(this._reactAppInstance._lazyCallableModules.BDLynxAPIModule)},t.prototype.setComponentConfig=function(t){this.$class=t,this.$hasDerivedFunction=!!isFunction(t.getDerivedStateFromProps);var e=t.__config,r=e.appInstance.lynx;this.$type=e.$type,this._nativeApp=e.appInstance.nativeApp,this._reactAppInstance=e.appInstance,this.setGlobalProps(r,e.initData),this.initJSModule(e.appInstance),this.GlobalEventEmitter=this._reactAppInstance.GlobalEventEmitter,r.getJSModule=this.getJSModule.bind(this)},t.prototype.getJSModule=function(t){return this._reactAppInstance._lazyCallableModules[t]},t.prototype.getNodeRef=function(t,e){return"component"===this.$type?new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,t,[],e):new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t,[],e)},t.prototype.getNodeRefFromRoot=function(t){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t)},t.prototype.getElementById=function(t){return new Element(""===this.componentId?"card":this.componentId,t,this._reactAppInstance.lynx)},t.prototype.addGlobalEventListener=function(t,e,r){this.getJSModule("GlobalEventEmitter").addListener(t,e,r)},t.prototype.setSharedData=function(t,e){_global.sharedData[t]=e},t.prototype.getSharedData=function(t){return _global.sharedData[t]},t.prototype.setGlobalProps=function(t,e){t&&!t.__globalProps&&e&&e.__globalProps&&(t.__globalProps=e.__globalProps)},t.prototype.triggerEvent=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(t,{eventDetail:e,eventOption:r,componentId:o})}catch(t){var a=t||{},i=a.message,s=a.stack,_=new InternalRuntimeError("trigger event error: "+(i="triggerEvent error: "+i),s);reportThrowError({error:_,nativeApp:n._nativeApp,rawError:t,proxy:void 0}),n._reactAppInstance.publishGlobalError(_,"trigger event error: "+i,s),n._reactAppInstance.onAppError(i)}},t.prototype.componentDidCatch=function(t){},t.prototype.componentDidMount=function(){},t.prototype.componentWillUnmount=function(){},t.prototype.componentDidUpdate=function(t,e,r){},t.prototype.componentDidShow=function(){},t.prototype.componentDidHide=function(){},t}(),propsMap=function(){function t(){this._map={}}return t.prototype.set=function(t,e){void 0===t&&(t={}),this._map[e]=t},t.prototype.getProps=function(t){return this._map[t]},t.prototype.deleteProps=function(t){delete this._map[t]},t.prototype.clear=function(){this._map={}},t}(),IntersectionObservationTarget=function(){function t(t,e){this._selector=t,this._callback=e}return t.prototype.invokeCallback=function(t){this._callback(t)},t}(),IntersectionObserver=function(){function t(t,e,r){this._id=t,this._intersectionObserverModule=e,this._manager=r,this._observationTargets=[],this._defaultMargins={left:0,right:0,top:0,bottom:0}}return t.prototype.relativeTo=function(t,e){return this._intersectionObserverModule.relativeTo(this._id,t,e||this._defaultMargins),this},t.prototype.relativeToViewport=function(t){return this._intersectionObserverModule.relativeToViewport(this._id,t||this._defaultMargins),this},t.prototype.observe=function(t,e){this._observationTargets.push(new IntersectionObservationTarget(t,e)),this._intersectionObserverModule.observe(this._id,t,this._observationTargets.length-1)},t.prototype.disconnect=function(){this._intersectionObserverModule.disconnect(this._id),this._manager.removeObserver(this._id)},t.prototype.invokeCallback=function(t,e){t<this._observationTargets.length&&this._observationTargets[t].invokeCallback(e)},t}(),IntersectionObserverManager=function(){function t(t){this._nativeModules=t,this._observerId=0,this._observers={},this._defaultOptions={thresholds:[0],initialRatio:0,observeAll:!1}}return t.prototype.createIntersectionObserver=function(t,e){var r=this._nativeModules.IntersectionObserverModule,n=new IntersectionObserver(this._observerId,r,this);return this._observers[this._observerId]=n,r.createIntersectionObserver(this._observerId,t,e||this._defaultOptions),this._observerId++,n},t.prototype.getObserver=function(t){return this._observers[t]},t.prototype.removeObserver=function(t){this._observers[t]=null},t}(),HookType,currentIndex,appInstance,options,currentHookType;function isFunctionComponent(t){return t&&t.$_isFunctionComponent}function getCurComponent(){return appInstance}function invokeOrReturn(t,e){return"function"==typeof e?e(t):e}function invokeCleanup(t){"function"==typeof t._cleanup&&t._cleanup()}function invokeEffect(t){t._cleanup=t._value()}function argsChanged(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function getHookState(t){var e=getCurComponent(),r=e.__hooks||(e.__hooks={_list:[],_pendingEffects:[]});return t>=r._list.length&&r._list.push({_type:currentHookType}),currentHookType=HookType.none,r._list[t]}function mountHooks(t,e){appInstance=t,options=e||{}}function resetHooks(t){currentIndex=0,appInstance=t}function executeEffects(t){var e=t.__hooks;e&&(e._pendingEffects.forEach(invokeCleanup),e._pendingEffects.forEach(invokeEffect),e._pendingEffects=[])}function cleanUpHooks(t){if(t&&t.__hooks)try{t.__hooks._list.forEach(invokeCleanup)}catch(t){options.catchError(t)}}function useEffect(t,e){currentHookType=HookType.useEffect;var r=getCurComponent(),n=getHookState(currentIndex++);!options._skipEffects&&argsChanged(n._args,e)&&(n._value=t,n._args=e,r.__hooks._pendingEffects.push(n))}function useReducer(t,e,r){currentHookType===HookType.none&&(currentHookType=HookType.useReducer);var n=getCurComponent(),o=getHookState(currentIndex++);return o._reducer=t,o._component||(o._value=[r?r(e):invokeOrReturn(void 0,e),function(t){var e=o._reducer(o._value[0],t);o._value[0]!==e&&(o._value=[e,o._value[1]],o._component.setHookState())}],o._component=n),o._value}function useState(t){return currentHookType=HookType.useState,useReducer(invokeOrReturn,t,null)}function useMemo(t,e){currentHookType===HookType.none&&(currentHookType=HookType.useMemo);var r=getHookState(currentIndex++);return argsChanged(r._args,e)&&(r._value=t(),r._args=e,r._factory=t),r._value}function useCallback(t,e){return currentHookType=HookType.useCallback,useMemo((function(){return t}),e)}function useRef(t){return currentHookType=HookType.useRef,useMemo((function(){return{current:t,id:null}}),[])}function useInstance(){return getCurComponent()}function syncInsHookState(t,e,r){if(void 0===r&&(r=!1),t&&t.$_hookStateKeys&&"object"==typeof e){var n=t.$_hookStateKeys;n.length&&Object.keys(e).filter((function(t){return n.includes(t)})).forEach((function(o){var a=null;if(!r||!isNull(e[o])){var i=n.findIndex((function(t){return t===o}));if(-1!=i)(a=(t.__hooks&&t.__hooks._list?t.__hooks._list.filter((function(t){return t._type===HookType.useState||t._type===HookType.useReducer})):[])[i])&&(a._value[0]=e[o])}}))}}!function(t){t[t.none=0]="none",t[t.useState=1]="useState",t[t.useReducer=2]="useReducer",t[t.useEffect=3]="useEffect",t[t.useMemo=4]="useMemo",t[t.useCallback=5]="useCallback",t[t.useRef=6]="useRef"}(HookType||(HookType={}));var Hooks={useState:useState,useReducer:useReducer,useEffect:useEffect,useMemo:useMemo,useCallback:useCallback,useRef:useRef,mountHooks:mountHooks,cleanUpHooks:cleanUpHooks,executeEffects:executeEffects,resetHooks:resetHooks,syncInsHookState:syncInsHookState,useInstance:useInstance},ReactFcComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.executeJSRender=function(){return Hooks.resetHooks(this),this._createData()},e.prototype.setHookState=function(){var t=this;this.batching||(this.batching=!0,this._reactAppInstance.resolvedPromise.then((function(){t.batching=!1,t.setHookStateInternal()})))},e.prototype.setHookStateInternal=function(){var t=this;try{var e=t.executeJSRender(),r=diffData(this.state,e);t.state=Object.assign(t.state,e),Object.keys(r).length&&this.updateDataToNative(r)}catch(e){var n=e||{},o=n.message,a=n.stack;reportThrowError({error:new InternalRuntimeError("setHookState error: "+o,a),nativeApp:t.nativeApp,rawError:e,proxy:void 0})}},e}(ReactComponent);function needPromisePolyfill(){return!0}function getPromiseMaybePolyfill(t,e,r){if(needPromisePolyfill()){var n=_global.getPromise;return"function"==typeof n?n({setTimeout:t,onUnhandled:e,clearTimeout:r}):_global.Promise}return _global.Promise}function disposeHeliumEventTarget(t,e){if(void 0===e&&(e=!1),t)try{var r=t;r.addEventListener&&(r.addEventListener=function(){}),r._lynxEventTypes&&r.removeAllListeners&&(r._lynxEventTypes.forEach((function(t){r.removeAllListeners(t)})),r._lynxEventTypes=null)}catch(t){e&&console.error(t)}}function disposeHeliumCanvas(t,e,r){if(void 0===r&&(r=!0),t){disposeHeliumEventTarget(t);try{var n=t,o=n.drawable;o&&e&&(e.canvases&&e.canvases[o]===n&&delete e.canvases[o],e.touchables&&e.touchables[o]===n&&delete e.touchables[o]),n.dispose&&(n.dispose(),n.dispose=null),n.getContext=null}catch(t){r&&console.error(t)}}}function disposeHeliumMedia(t,e){if(void 0===e&&(e=!1),t){disposeHeliumEventTarget(t);try{var r=t;r&&(r.stop&&r.stop(),r.src=null,r.srcObject&&(r.srcObject=null),r.setLynxSrc&&(r.setLynxSrc=null))}catch(t){e&&console.error(t)}}}function replaceHeliumEventTargetListenerFunction(t){if(t&&t.addEventListener){var e=t,r=e.addEventListener.bind(e);e.addEventListener=function(t,e){r(t,e),this._lynxEventTypes||(this._lynxEventTypes=new Set),this._lynxEventTypes.add(t)}}}function replaceHeliumCanvasGetContextFunction(t){if(t&&t.getContext){var e=t,r=e.getContext.bind(e);e.getContext=function(t,n){var o=r(t,n);if("webgl"!==t||!o||o._lynxAllocatedWebglData)return o;if(o._lynxAllocatedWebglData={textures:new Set,frameBuffers:new Set,renderBuffers:new Set,programs:new Set,shaders:new Set,buffers:new Set},e.dispose){var a=e.dispose.bind(e);e.dispose=function(){var t=o._lynxAllocatedWebglData;t.textures.forEach((function(t){o.deleteTexture(t)})),t.textures.clear(),t.frameBuffers.forEach((function(t){o.deleteFramebuffer(t)})),t.frameBuffers.clear(),t.renderBuffers.forEach((function(t){o.deleteRenderbuffer(t)})),t.renderBuffers.clear(),t.programs.forEach((function(t){o.deleteProgram(t)})),t.programs.clear(),t.shaders.forEach((function(t){o.deleteShader(t)})),t.shaders.clear(),t.buffers.forEach((function(t){o.deleteBuffer(t)})),t.buffers.clear(),a()}}var i=o.createTexture.bind(o);o.createTexture=function(){var t=i();return t&&o._lynxAllocatedWebglData.textures.add(t),t};var s=o.deleteTexture.bind(o);o.deleteTexture=function(t){return t&&o._lynxAllocatedWebglData.textures.delete(t),s(t)};var _=o.createFramebuffer.bind(o);o.createFramebuffer=function(){var t=_();return t&&o._lynxAllocatedWebglData.frameBuffers.add(t),t};var p=o.deleteFramebuffer.bind(o);o.deleteFramebuffer=function(t){return t&&o._lynxAllocatedWebglData.frameBuffers.delete(t),p(t)};var c=o.createRenderbuffer.bind(o);o.createRenderbuffer=function(){var t=c();return t&&o._lynxAllocatedWebglData.renderBuffers.add(t),t};var l=o.deleteRenderbuffer.bind(o);o.deleteRenderbuffer=function(t){return t&&o._lynxAllocatedWebglData.renderBuffers.delete(t),l(t)};var u=o.createProgram.bind(o);o.createProgram=function(){var t=u();return t&&o._lynxAllocatedWebglData.programs.add(t),t};var h=o.deleteProgram.bind(o);o.deleteProgram=function(t){return t&&o._lynxAllocatedWebglData.programs.delete(t),h(t)};var f=o.createShader.bind(o);o.createShader=function(t){var e=f(t);return e&&o._lynxAllocatedWebglData.shaders.add(e),e};var d=o.deleteShader.bind(o);o.deleteShader=function(t){return t&&o._lynxAllocatedWebglData.shaders.delete(t),d(t)};var v=o.createBuffer.bind(o);o.createBuffer=function(){var t=v();return t&&o._lynxAllocatedWebglData.buffers.add(t),t};var E=o.deleteBuffer.bind(o);return o.deleteBuffer=function(t){return t&&o._lynxAllocatedWebglData.buffers.delete(t),E(t)},o}}}function flushOnScreenCanvases(t,e){void 0===e&&(e=!1);var r=t;try{if(r._heliumData&&r._heliumData.onCanvases){var n=r._heliumData.onCanvases;for(var o in n){var a=n[o];if(a&&a.canvas)a.canvas.forceUpdate.bind(a.canvas)()}}}catch(t){e&&console.error(t)}}function clearHeliumCanvas(t,e){void 0===e&&(e=!1);var r=t;if(r._heliumData)try{if(r._heliumData.medias&&r._heliumData.medias.forEach((function(t){disposeHeliumMedia(t)})),r._heliumData.onCanvases){var n=r._heliumData.onCanvases;for(var o in n){var a=n[o];a&&disposeHeliumCanvas(a.canvas,r._heliumData.scandium)}}if(r._heliumData.offCanvases&&r._heliumData.offCanvases.forEach((function(t){disposeHeliumCanvas(t,r._heliumData.scandium)})),r._heliumData.audioCtx)try{r._heliumData.audioCtx._unref()}catch(t){e&&console.error(t)}if(r._heliumData.hardware)try{r._heliumData.hardware.dispose()}catch(t){e&&console.error(t)}}catch(t){e&&console.error(t)}r._heliumData=null}function initHeliumCanvas(t,e){var r=t,n=r.lynx;if(!r._heliumData){r._heliumData={helium:null,scandium:null,aurum:null,medias:[],onCanvases:{},canvasIndex:0,offCanvases:new Set,audioCtx:null,hardware:null,effect:null,napi:null,amazing:null,hasFlushCallback:!1};var o=function(){return r._heliumData.helium||(r._heliumData.helium=r._nativeApp.heliumProxy())};n.helium=o;var a=function(){return r._heliumData.aurum||(r._heliumData.aurum=r._nativeApp.heliumProxy("Aurum"))};n.aurum=a;var i=function(){return r._heliumData.scandium||(r._heliumData.scandium=o().require("scandium"))},s=function(){return"?_lynxId="+(r._params?r._params.appGUID:"")};n.disposeAllCanvases=function(){clearHeliumCanvas(r)};var _=function(t,e,r,n){if(e>=2)r>0&&n>0&&(t.width=r,t.height=n);else{var o=1;(o=1==e?r:i().ratio)>0&&1!==o&&(t.width*=o,t.height*=o)}},p=function(){r._heliumData.hasFlushCallback||(r._heliumData.hasFlushCallback=!0,r._nativeApp.heliumSetFlushCallback((function(){flushOnScreenCanvases(r)})))};n.createCanvas=function(t,e,n){if(!t)return null;var o=i(),a=++r._heliumData.canvasIndex,s=r._heliumData.onCanvases[t];s?(disposeHeliumCanvas(s.canvas,o),s={index:a,canvas:null,name:t}):s=r._heliumData.onCanvases[t]={index:a,canvas:null,name:t};var c=r._nativeApp.createCanvas(t);if(!c)return null;var l=i().touchables[c];return l?(s.canvas=l,replaceHeliumCanvasGetContextFunction(l),replaceHeliumEventTargetListenerFunction(l),_(l,arguments.length-1,e,n),p(),l):null},n.createCanvasAsync=function(t,e,n,o,a){if(void 0===e&&(e=function(){}),void 0===n&&(n=function(){}),t&&e){var s=i(),c=++r._heliumData.canvasIndex,l=r._heliumData.onCanvases[t];l?(disposeHeliumCanvas(l.canvas,s),l={index:c,canvas:null,name:t}):l=r._heliumData.onCanvases[t]={index:c,canvas:null,name:t};var u=arguments.length-3;r._nativeApp.createCanvasAsync(t,(function(r){var i=s.touchables[r];i?l.index!==c?(disposeHeliumCanvas(i,s),n&&n("ignore old request")):(l.canvas=i,replaceHeliumCanvasGetContextFunction(i),replaceHeliumEventTargetListenerFunction(i),_(i,u,o,a),p(),e(i)):n&&n("no touchables found for "+t)}))}else n&&n("missing name or onSuccess param")},n.getCanvasCreatedByName=function(t){if(t){var e=r._heliumData.onCanvases[t];if(e)return e.canvas}return null},n.createImage=function(t){var e=new(o().Image)(s());return replaceHeliumEventTargetListenerFunction(e),e.setLynxSrc=function(t){this.src=t},t&&(e.src=t),r._heliumData.medias.push(e),e},n.createVideo=function(t){var e=new(o().Video)(s());return replaceHeliumEventTargetListenerFunction(e),e.setLynxSrc=function(t){this.src=t},r._heliumData.medias.push(e),t&&(e.src=t),e},n.readFileSync=function(t,e){var r=i(),n=e&&e.encoding?r.LOAD_TEXT:r.LOAD_ARRAYBUFFER;return r.loadSync(t+s(),n)},n.readFile=function(t,e,n){var o=i(),a=n&&n.encoding?o.LOAD_TEXT:o.LOAD_ARRAYBUFFER;o.loadAsync(t+s(),a,(function(t){null!=r._nativeApp&&e&&e(t)}))},n.createOffscreenCanvas=function(t,e){var n=new(o().Canvas)(0,t>0?t:300,e>0?e:300);return n&&(replaceHeliumCanvasGetContextFunction(n),replaceHeliumEventTargetListenerFunction(n),r._heliumData.offCanvases.add(n)),n},n.createAudio=function(t){var e=new(0,a().Audio);return e._url_suffix=s(),e.setLynxSrc=function(t){this.src=t+this._url_suffix},r._heliumData.medias.push(e),t&&(e.src=t+e._url_suffix),e},n.getAudioContext=function(){var t=r._heliumData.audioCtx;if(!t){var e=a().AudioContext,n=(t=r._heliumData.audioCtx=new e)._ref;n&&n()}return t},n.getHardWareManager=function(){if(!r._heliumData.hardware){var t=r._nativeApp.heliumProxy("hardware").HardWareManager;r._heliumData.hardware=new t}return r._heliumData.hardware},n.getEffect=function(){var t=r._heliumData.effect;if(t||!r._nativeApp.validateEffect())return t;var e=o();return t={createFaceInfoConvertor:e.createFaceInfoConvertor,createFaceDetector:e.createFaceDetector,createHandDetector:e.createHandDetector,createHandInfoConvertor:e.createHandInfoConvertor,createSkeletonDetector:e.createSkeletonDetector,createSlamInfoConvertor:e.createSlamInfoConvertor,createSlamDetector:e.createSlamDetector}},n.napi=function(){return r._heliumData.napi||(r._heliumData.napi=r._nativeApp.heliumProxy("napi"))},n.getAmaz=function(){var t=r._heliumData.amazing;if(t)return t;var e=r._nativeApp.heliumProxy("effect_module");return e?(r._heliumData.amazing=t=n.napi().load(e),t):null};var c=function(t,e,n){t.media.request(t.media.AUDIO,(function(t){n&&(t&&t.success?n(e()):n(null,t&&t.errMsg?t.errMsg:"unknown"))})),null!=r._nativeApp&&r._nativeApp.onJSBridgeInvoked("helium","heliumRequestMicrophone")},l=function(t,e,n){var o=t.media,a=o.VIDEO,i=e.facingMode;"object"==typeof i&&(a|=o.EXACT,i=i.exact),"environment"!==i&&"back"!==i||(a|=o.BACK),e.beautify&&(a|=o.BEAUTIFY),e.landscape&&(a|=o.LANDSCAPE_RIGHT),e.hand&&(a|=o.HAND),e.hairParser&&(a|=o.HAIRPARSE),e.matting&&(a|=o.MATTING),e.skeleton&&(a|=o.SKELETON),e.planeTrack&&(a|=o.PLANETRACK),e.sticker&&(a|=o.STICKER);var s=e.pageId||0;o.request(a,(function(t){n&&(t&&t.success?n(t):n(null,t&&t.errMsg?t.errMsg:"unknown"))}),s),null!=r._nativeApp&&r._nativeApp.onJSBridgeInvoked("helium","heliumRequestCamera")};n.getUserMedia=function(t,e,n){void 0===e&&(e=function(){}),void 0===n&&(n=function(){});var i=function(t,o){r._nativeApp&&t?e(t):n(o)};if(t&&t.video){var s=t.video instanceof Object?t.video:{};l(o(),s,i)}else if(t&&t.audio){var _=a().setupCapture;c(o(),_,i)}else n("error params")},n.requestMicrophone=function(){return new e((function(t,e){var n=a().setupCapture;c(o(),n,(function(n,o){null==r._nativeApp?e(new Error("Native app is released. !!!Please do not call any native related functions. ")):n?t(n):e(new Error(o))}))}))},n.pauseMicrophone=function(){var t=a().pauseCapture;t&&t()},n.resumeMicrophone=function(){var t=a().resumeCapture;t&&t()},n.requestCamera=function(t,n,a,i){return new e((function(e,a){var s=t instanceof Object?t:{};"environment"!==t&&"back"!==t||(s.facingMode=t),n&&(s.beautify=!0),i&&(s.hand=!0),l(o(),s,(function(t,n){null==r._nativeApp?a(new Error("Native app is released. !!!Please do not call any native related functions. ")):t?e(t):a(new Error(n))}))}))}}}var commandBufferCreator=function(t){if(t._commandBuffer)return t._commandBuffer;var e=[],r=new Float32Array(t.WebGLRenderingContext.commands),n=new Int32Array(t.WebGLRenderingContext.commands),o=new Uint32Array(t.WebGLRenderingContext.commands),a=t.WebGLRenderingContext.flushCommandBuffer;o[0]=1;var i=4096;var s={activeTexture:function(t){var r=o[0];o[r]=1,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},attachShader:function(t,r){var n=o[0];o[n]=2,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t._ptr_low,o[n+4]=t._ptr_high,e.push(t),o[n+5]=r._ptr_low,o[n+6]=r._ptr_high,e.push(r),n+=7,o[0]=n,n>i&&(a(),e=[])},bindBuffer:function(t,r){var n=o[0];o[n]=3,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=null==r?void 0:r._ptr_low,o[n+5]=null==r?void 0:r._ptr_high,e.push(r),n+=6,o[0]=n,n>i&&(a(),e=[])},bindFramebuffer:function(t,r){var n=o[0];o[n]=4,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=null==r?void 0:r._ptr_low,o[n+5]=null==r?void 0:r._ptr_high,e.push(r),n+=6,o[0]=n,n>i&&(a(),e=[])},bindRenderbuffer:function(t,r){var n=o[0];o[n]=5,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=null==r?void 0:r._ptr_low,o[n+5]=null==r?void 0:r._ptr_high,e.push(r),n+=6,o[0]=n,n>i&&(a(),e=[])},bindTexture:function(t,r){var n=o[0];o[n]=6,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=null==r?void 0:r._ptr_low,o[n+5]=null==r?void 0:r._ptr_high,e.push(r),n+=6,o[0]=n,n>i&&(a(),e=[])},blendColor:function(t,n,s,_){var p=o[0];o[p]=7,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,r[p+3]=t,r[p+4]=n,r[p+5]=s,r[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},blendEquation:function(t){var r=o[0];o[r]=8,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},blendEquationSeparate:function(t,r){var n=o[0];o[n]=9,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=r,n+=5,o[0]=n,n>i&&(a(),e=[])},blendFunc:function(t,r){var n=o[0];o[n]=10,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=r,n+=5,o[0]=n,n>i&&(a(),e=[])},blendFuncSeparate:function(t,r,n,s){var _=o[0];o[_]=11,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=r,o[_+5]=n,o[_+6]=s,_+=7,o[0]=_,_>i&&(a(),e=[])},clear:function(t){var r=o[0];o[r]=12,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,(r>i||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,a(),e=[])},clearColor:function(t,n,s,_){var p=o[0];o[p]=13,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,r[p+3]=t,r[p+4]=n,r[p+5]=s,r[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},clearDepth:function(t){var n=o[0];o[n]=14,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,r[n+3]=t,n+=4,o[0]=n,n>i&&(a(),e=[])},clearStencil:function(t){var r=o[0];o[r]=15,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,n[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},colorMask:function(t,r,n,s){var _=o[0];o[_]=16,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=r,o[_+5]=n,o[_+6]=s,_+=7,o[0]=_,_>i&&(a(),e=[])},compileShader:function(t){var r=o[0];o[r]=17,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t._ptr_low,o[r+4]=t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},copyTexImage2D:function(t,r,s,_,p,c,l,u){var h=o[0];o[h]=18,o[h+1]=this._ptr_low,o[h+2]=this._ptr_high,o[h+3]=t,n[h+4]=r,o[h+5]=s,n[h+6]=_,n[h+7]=p,n[h+8]=c,n[h+9]=l,n[h+10]=u,h+=11,o[0]=h,h>i&&(a(),e=[])},copyTexSubImage2D:function(t,r,s,_,p,c,l,u){var h=o[0];o[h]=19,o[h+1]=this._ptr_low,o[h+2]=this._ptr_high,o[h+3]=t,n[h+4]=r,n[h+5]=s,n[h+6]=_,n[h+7]=p,n[h+8]=c,n[h+9]=l,n[h+10]=u,h+=11,o[0]=h,h>i&&(a(),e=[])},cullFace:function(t){var r=o[0];o[r]=20,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},deleteBuffer:function(t){var r=o[0];o[r]=21,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},deleteFramebuffer:function(t){var r=o[0];o[r]=22,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},deleteProgram:function(t){var r=o[0];o[r]=23,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},deleteRenderbuffer:function(t){var r=o[0];o[r]=24,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},deleteShader:function(t){var r=o[0];o[r]=25,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},deleteTexture:function(t){var r=o[0];o[r]=26,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},depthFunc:function(t){var r=o[0];o[r]=27,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},depthMask:function(t){var r=o[0];o[r]=28,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},depthRange:function(t,n){var s=o[0];o[s]=29,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,r[s+3]=t,r[s+4]=n,s+=5,o[0]=s,s>i&&(a(),e=[])},detachShader:function(t,r){var n=o[0];o[n]=30,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t._ptr_low,o[n+4]=t._ptr_high,e.push(t),o[n+5]=r._ptr_low,o[n+6]=r._ptr_high,e.push(r),n+=7,o[0]=n,n>i&&(a(),e=[])},disable:function(t){var r=o[0];o[r]=31,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},disableVertexAttribArray:function(t){var r=o[0];o[r]=32,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},drawArrays:function(t,r,s){var _=o[0];o[_]=33,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,n[_+4]=r,n[_+5]=s,_+=6,o[0]=_,(_>i||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,a(),e=[])},drawElements:function(t,r,s,_){var p=o[0];o[p]=34,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=t,n[p+4]=r,o[p+5]=s,n[p+6]=_,p+=7,o[0]=p,(p>i||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,a(),e=[])},enable:function(t){var r=o[0];o[r]=35,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},enableVertexAttribArray:function(t){var r=o[0];o[r]=36,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},flush:function(){var t=o[0];o[t]=37,o[t+1]=this._ptr_low,o[t+2]=this._ptr_high,t+=3,o[0]=t,(t>i||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,a(),e=[])},framebufferRenderbuffer:function(t,r,n,s){var _=o[0];o[_]=38,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=r,o[_+5]=n,o[_+6]=null==s?void 0:s._ptr_low,o[_+7]=null==s?void 0:s._ptr_high,e.push(s),_+=8,o[0]=_,_>i&&(a(),e=[])},framebufferTexture2D:function(t,r,s,_,p){var c=o[0];o[c]=39,o[c+1]=this._ptr_low,o[c+2]=this._ptr_high,o[c+3]=t,o[c+4]=r,o[c+5]=s,o[c+6]=null==_?void 0:_._ptr_low,o[c+7]=null==_?void 0:_._ptr_high,e.push(_),n[c+8]=p,c+=9,o[0]=c,c>i&&(a(),e=[])},frontFace:function(t){var r=o[0];o[r]=40,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},generateMipmap:function(t){var r=o[0];o[r]=41,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},hint:function(t,r){var n=o[0];o[n]=42,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=r,n+=5,o[0]=n,n>i&&(a(),e=[])},lineWidth:function(t){var n=o[0];o[n]=43,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,r[n+3]=t,n+=4,o[0]=n,n>i&&(a(),e=[])},linkProgram:function(t){var r=o[0];o[r]=44,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t._ptr_low,o[r+4]=t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},pixelStorei:function(t,r){var s=o[0];o[s]=45,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,n[s+4]=r,s+=5,o[0]=s,s>i&&(a(),e=[])},polygonOffset:function(t,n){var s=o[0];o[s]=46,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,r[s+3]=t,r[s+4]=n,s+=5,o[0]=s,s>i&&(a(),e=[])},renderbufferStorage:function(t,r,s,_){var p=o[0];o[p]=47,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=t,o[p+4]=r,n[p+5]=s,n[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},sampleCoverage:function(t,n){var s=o[0];o[s]=48,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,r[s+3]=t,o[s+4]=n,s+=5,o[0]=s,s>i&&(a(),e=[])},scissor:function(t,r,s,_){var p=o[0];o[p]=49,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,n[p+3]=t,n[p+4]=r,n[p+5]=s,n[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},stencilFunc:function(t,r,s){var _=o[0];o[_]=50,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,n[_+4]=r,o[_+5]=s,_+=6,o[0]=_,_>i&&(a(),e=[])},stencilFuncSeparate:function(t,r,s,_){var p=o[0];o[p]=51,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=t,o[p+4]=r,n[p+5]=s,o[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},stencilMask:function(t){var r=o[0];o[r]=52,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t,r+=4,o[0]=r,r>i&&(a(),e=[])},stencilMaskSeparate:function(t,r){var n=o[0];o[n]=53,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=r,n+=5,o[0]=n,n>i&&(a(),e=[])},stencilOp:function(t,r,n){var s=o[0];o[s]=54,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,o[s+4]=r,o[s+5]=n,s+=6,o[0]=s,s>i&&(a(),e=[])},stencilOpSeparate:function(t,r,n,s){var _=o[0];o[_]=55,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=r,o[_+5]=n,o[_+6]=s,_+=7,o[0]=_,_>i&&(a(),e=[])},texParameterf:function(t,n,s){var _=o[0];o[_]=56,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=n,r[_+5]=s,_+=6,o[0]=_,_>i&&(a(),e=[])},texParameteri:function(t,r,s){var _=o[0];o[_]=57,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=r,n[_+5]=s,_+=6,o[0]=_,_>i&&(a(),e=[])},uniform1f:function(t,n){var s=o[0];o[s]=58,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),r[s+5]=n,s+=6,o[0]=s,s>i&&(a(),e=[])},uniform1fv:function(t,n){var s=o[0];o[s]=59,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=n.length,s+=6,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},uniform1i:function(t,r){var s=o[0];o[s]=60,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),n[s+5]=r,s+=6,o[0]=s,s>i&&(a(),e=[])},uniform1iv:function(t,r){var s=o[0];o[s]=61,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=r.length,s+=6,n.set(r,s),s+=r.length,o[0]=s,s>i&&(a(),e=[])},uniform2f:function(t,n,s){var _=o[0];o[_]=62,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=null==t?void 0:t._ptr_low,o[_+4]=null==t?void 0:t._ptr_high,e.push(t),r[_+5]=n,r[_+6]=s,_+=7,o[0]=_,_>i&&(a(),e=[])},uniform2fv:function(t,n){var s=o[0];o[s]=63,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=n.length,s+=6,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},uniform2i:function(t,r,s){var _=o[0];o[_]=64,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=null==t?void 0:t._ptr_low,o[_+4]=null==t?void 0:t._ptr_high,e.push(t),n[_+5]=r,n[_+6]=s,_+=7,o[0]=_,_>i&&(a(),e=[])},uniform2iv:function(t,r){var s=o[0];o[s]=65,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=r.length,s+=6,n.set(r,s),s+=r.length,o[0]=s,s>i&&(a(),e=[])},uniform3f:function(t,n,s,_){var p=o[0];o[p]=66,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=null==t?void 0:t._ptr_low,o[p+4]=null==t?void 0:t._ptr_high,e.push(t),r[p+5]=n,r[p+6]=s,r[p+7]=_,p+=8,o[0]=p,p>i&&(a(),e=[])},uniform3fv:function(t,n){var s=o[0];o[s]=67,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=n.length,s+=6,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},uniform3i:function(t,r,s,_){var p=o[0];o[p]=68,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=null==t?void 0:t._ptr_low,o[p+4]=null==t?void 0:t._ptr_high,e.push(t),n[p+5]=r,n[p+6]=s,n[p+7]=_,p+=8,o[0]=p,p>i&&(a(),e=[])},uniform3iv:function(t,r){var s=o[0];o[s]=69,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=r.length,s+=6,n.set(r,s),s+=r.length,o[0]=s,s>i&&(a(),e=[])},uniform4f:function(t,n,s,_,p){var c=o[0];o[c]=70,o[c+1]=this._ptr_low,o[c+2]=this._ptr_high,o[c+3]=null==t?void 0:t._ptr_low,o[c+4]=null==t?void 0:t._ptr_high,e.push(t),r[c+5]=n,r[c+6]=s,r[c+7]=_,r[c+8]=p,c+=9,o[0]=c,c>i&&(a(),e=[])},uniform4fv:function(t,n){var s=o[0];o[s]=71,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=n.length,s+=6,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},uniform4i:function(t,r,s,_,p){var c=o[0];o[c]=72,o[c+1]=this._ptr_low,o[c+2]=this._ptr_high,o[c+3]=null==t?void 0:t._ptr_low,o[c+4]=null==t?void 0:t._ptr_high,e.push(t),n[c+5]=r,n[c+6]=s,n[c+7]=_,n[c+8]=p,c+=9,o[0]=c,c>i&&(a(),e=[])},uniform4iv:function(t,r){var s=o[0];o[s]=73,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=null==t?void 0:t._ptr_low,o[s+4]=null==t?void 0:t._ptr_high,e.push(t),o[s+5]=r.length,s+=6,n.set(r,s),s+=r.length,o[0]=s,s>i&&(a(),e=[])},uniformMatrix2fv:function(t,n,s){var _=o[0];o[_]=74,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=null==t?void 0:t._ptr_low,o[_+4]=null==t?void 0:t._ptr_high,e.push(t),o[_+5]=n,o[_+6]=s.length,_+=7,r.set(s,_),_+=s.length,o[0]=_,_>i&&(a(),e=[])},uniformMatrix3fv:function(t,n,s){var _=o[0];o[_]=75,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=null==t?void 0:t._ptr_low,o[_+4]=null==t?void 0:t._ptr_high,e.push(t),o[_+5]=n,o[_+6]=s.length,_+=7,r.set(s,_),_+=s.length,o[0]=_,_>i&&(a(),e=[])},uniformMatrix4fv:function(t,n,s){var _=o[0];o[_]=76,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=null==t?void 0:t._ptr_low,o[_+4]=null==t?void 0:t._ptr_high,e.push(t),o[_+5]=n,o[_+6]=s.length,_+=7,r.set(s,_),_+=s.length,o[0]=_,_>i&&(a(),e=[])},useProgram:function(t){var r=o[0];o[r]=77,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=null==t?void 0:t._ptr_low,o[r+4]=null==t?void 0:t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},validateProgram:function(t){var r=o[0];o[r]=78,o[r+1]=this._ptr_low,o[r+2]=this._ptr_high,o[r+3]=t._ptr_low,o[r+4]=t._ptr_high,e.push(t),r+=5,o[0]=r,r>i&&(a(),e=[])},vertexAttrib1f:function(t,n){var s=o[0];o[s]=79,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,r[s+4]=n,s+=5,o[0]=s,s>i&&(a(),e=[])},vertexAttrib1fv:function(t,n){var s=o[0];o[s]=80,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,o[s+4]=n.length,s+=5,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},vertexAttrib2f:function(t,n,s){var _=o[0];o[_]=81,o[_+1]=this._ptr_low,o[_+2]=this._ptr_high,o[_+3]=t,r[_+4]=n,r[_+5]=s,_+=6,o[0]=_,_>i&&(a(),e=[])},vertexAttrib2fv:function(t,n){var s=o[0];o[s]=82,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,o[s+4]=n.length,s+=5,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},vertexAttrib3f:function(t,n,s,_){var p=o[0];o[p]=83,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=t,r[p+4]=n,r[p+5]=s,r[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},vertexAttrib3fv:function(t,n){var s=o[0];o[s]=84,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,o[s+4]=n.length,s+=5,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},vertexAttrib4f:function(t,n,s,_,p){var c=o[0];o[c]=85,o[c+1]=this._ptr_low,o[c+2]=this._ptr_high,o[c+3]=t,r[c+4]=n,r[c+5]=s,r[c+6]=_,r[c+7]=p,c+=8,o[0]=c,c>i&&(a(),e=[])},vertexAttrib4fv:function(t,n){var s=o[0];o[s]=86,o[s+1]=this._ptr_low,o[s+2]=this._ptr_high,o[s+3]=t,o[s+4]=n.length,s+=5,r.set(n,s),s+=n.length,o[0]=s,s>i&&(a(),e=[])},vertexAttribPointer:function(t,r,s,_,p,c){var l=o[0];o[l]=87,o[l+1]=this._ptr_low,o[l+2]=this._ptr_high,o[l+3]=t,n[l+4]=r,o[l+5]=s,o[l+6]=_,n[l+7]=p,n[l+8]=c,l+=9,o[0]=l,l>i&&(a(),e=[])},viewport:function(t,r,s,_){var p=o[0];o[p]=88,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,n[p+3]=t,n[p+4]=r,n[p+5]=s,n[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},drawArraysInstancedANGLE:function(t,r,s,_){var p=o[0];o[p]=89,o[p+1]=this._ptr_low,o[p+2]=this._ptr_high,o[p+3]=t,n[p+4]=r,n[p+5]=s,n[p+6]=_,p+=7,o[0]=p,p>i&&(a(),e=[])},drawElementsInstancedANGLE:function(t,r,s,_,p){var c=o[0];o[c]=90,o[c+1]=this._ptr_low,o[c+2]=this._ptr_high,o[c+3]=t,n[c+4]=r,o[c+5]=s,n[c+6]=_,n[c+7]=p,c+=8,o[0]=c,c>i&&(a(),e=[])},vertexAttribDivisorANGLE:function(t,r){var n=o[0];o[n]=91,o[n+1]=this._ptr_low,o[n+2]=this._ptr_high,o[n+3]=t,o[n+4]=r,n+=5,o[0]=n,n>i&&(a(),e=[])}};return t._commandBuffer=s,s};function redirect(t,e){var r=commandBufferCreator(t);e.activeTexture=r.activeTexture,e.attachShader=r.attachShader,e.bindBuffer=r.bindBuffer,e.bindFramebuffer=r.bindFramebuffer,e.bindRenderbuffer=r.bindRenderbuffer,e.bindTexture=r.bindTexture,e.blendColor=r.blendColor,e.blendEquation=r.blendEquation,e.blendEquationSeparate=r.blendEquationSeparate,e.blendFunc=r.blendFunc,e.blendFuncSeparate=r.blendFuncSeparate,e.clear=r.clear,e.clearColor=r.clearColor,e.clearDepth=r.clearDepth,e.clearStencil=r.clearStencil,e.colorMask=r.colorMask,e.compileShader=r.compileShader,e.copyTexImage2D=r.copyTexImage2D,e.copyTexSubImage2D=r.copyTexSubImage2D,e.cullFace=r.cullFace,e.deleteBuffer=r.deleteBuffer,e.deleteFramebuffer=r.deleteFramebuffer,e.deleteProgram=r.deleteProgram,e.deleteRenderbuffer=r.deleteRenderbuffer,e.deleteShader=r.deleteShader,e.deleteTexture=r.deleteTexture,e.depthFunc=r.depthFunc,e.depthMask=r.depthMask,e.depthRange=r.depthRange,e.detachShader=r.detachShader,e.disable=r.disable,e.disableVertexAttribArray=r.disableVertexAttribArray,e.drawArrays=r.drawArrays,e.drawElements=r.drawElements,e.enable=r.enable,e.enableVertexAttribArray=r.enableVertexAttribArray,e.flush=r.flush,e.framebufferRenderbuffer=r.framebufferRenderbuffer,e.framebufferTexture2D=r.framebufferTexture2D,e.frontFace=r.frontFace,e.generateMipmap=r.generateMipmap,e.hint=r.hint,e.lineWidth=r.lineWidth,e.linkProgram=r.linkProgram,e.pixelStorei=r.pixelStorei,e.polygonOffset=r.polygonOffset,e.renderbufferStorage=r.renderbufferStorage,e.sampleCoverage=r.sampleCoverage,e.scissor=r.scissor,e.stencilFunc=r.stencilFunc,e.stencilFuncSeparate=r.stencilFuncSeparate,e.stencilMask=r.stencilMask,e.stencilMaskSeparate=r.stencilMaskSeparate,e.stencilOp=r.stencilOp,e.stencilOpSeparate=r.stencilOpSeparate,e.texParameterf=r.texParameterf,e.texParameteri=r.texParameteri,e.uniform1f=r.uniform1f,e.uniform1fv=r.uniform1fv,e.uniform1i=r.uniform1i,e.uniform1iv=r.uniform1iv,e.uniform2f=r.uniform2f,e.uniform2fv=r.uniform2fv,e.uniform2i=r.uniform2i,e.uniform2iv=r.uniform2iv,e.uniform3f=r.uniform3f,e.uniform3fv=r.uniform3fv,e.uniform3i=r.uniform3i,e.uniform3iv=r.uniform3iv,e.uniform4f=r.uniform4f,e.uniform4fv=r.uniform4fv,e.uniform4i=r.uniform4i,e.uniform4iv=r.uniform4iv,e.uniformMatrix2fv=r.uniformMatrix2fv,e.uniformMatrix3fv=r.uniformMatrix3fv,e.uniformMatrix4fv=r.uniformMatrix4fv,e.useProgram=r.useProgram,e.validateProgram=r.validateProgram,e.vertexAttrib1f=r.vertexAttrib1f,e.vertexAttrib1fv=r.vertexAttrib1fv,e.vertexAttrib2f=r.vertexAttrib2f,e.vertexAttrib2fv=r.vertexAttrib2fv,e.vertexAttrib3f=r.vertexAttrib3f,e.vertexAttrib3fv=r.vertexAttrib3fv,e.vertexAttrib4f=r.vertexAttrib4f,e.vertexAttrib4fv=r.vertexAttrib4fv,e.vertexAttribPointer=r.vertexAttribPointer,e.viewport=r.viewport,e.drawArraysInstancedANGLE=r.drawArraysInstancedANGLE,e.drawElementsInstancedANGLE=r.drawElementsInstancedANGLE,e.vertexAttribDivisorANGLE=r.vertexAttribDivisorANGLE,e.__proto__.DEPTH_BUFFER_BIT=256,e.__proto__.STENCIL_BUFFER_BIT=1024,e.__proto__.COLOR_BUFFER_BIT=16384,e.__proto__.POINTS=0,e.__proto__.LINES=1,e.__proto__.LINE_LOOP=2,e.__proto__.LINE_STRIP=3,e.__proto__.TRIANGLES=4,e.__proto__.TRIANGLE_STRIP=5,e.__proto__.TRIANGLE_FAN=6,e.__proto__.ZERO=0,e.__proto__.ONE=1,e.__proto__.SRC_COLOR=768,e.__proto__.ONE_MINUS_SRC_COLOR=769,e.__proto__.SRC_ALPHA=770,e.__proto__.ONE_MINUS_SRC_ALPHA=771,e.__proto__.DST_ALPHA=772,e.__proto__.ONE_MINUS_DST_ALPHA=773,e.__proto__.DST_COLOR=774,e.__proto__.ONE_MINUS_DST_COLOR=775,e.__proto__.SRC_ALPHA_SATURATE=776,e.__proto__.FUNC_ADD=32774,e.__proto__.BLEND_EQUATION=32777,e.__proto__.BLEND_EQUATION_RGB=32777,e.__proto__.BLEND_EQUATION_ALPHA=34877,e.__proto__.FUNC_SUBTRACT=32778,e.__proto__.FUNC_REVERSE_SUBTRACT=32779,e.__proto__.BLEND_DST_RGB=32968,e.__proto__.BLEND_SRC_RGB=32969,e.__proto__.BLEND_DST_ALPHA=32970,e.__proto__.BLEND_SRC_ALPHA=32971,e.__proto__.CONSTANT_COLOR=32769,e.__proto__.ONE_MINUS_CONSTANT_COLOR=32770,e.__proto__.CONSTANT_ALPHA=32771,e.__proto__.ONE_MINUS_CONSTANT_ALPHA=32772,e.__proto__.BLEND_COLOR=32773,e.__proto__.ARRAY_BUFFER=34962,e.__proto__.ELEMENT_ARRAY_BUFFER=34963,e.__proto__.ARRAY_BUFFER_BINDING=34964,e.__proto__.ELEMENT_ARRAY_BUFFER_BINDING=34965,e.__proto__.STREAM_DRAW=35040,e.__proto__.STATIC_DRAW=35044,e.__proto__.DYNAMIC_DRAW=35048,e.__proto__.BUFFER_SIZE=34660,e.__proto__.BUFFER_USAGE=34661,e.__proto__.CURRENT_VERTEX_ATTRIB=34342,e.__proto__.FRONT=1028,e.__proto__.BACK=1029,e.__proto__.FRONT_AND_BACK=1032,e.__proto__.TEXTURE_2D=3553,e.__proto__.CULL_FACE=2884,e.__proto__.BLEND=3042,e.__proto__.DITHER=3024,e.__proto__.STENCIL_TEST=2960,e.__proto__.DEPTH_TEST=2929,e.__proto__.SCISSOR_TEST=3089,e.__proto__.POLYGON_OFFSET_FILL=32823,e.__proto__.SAMPLE_ALPHA_TO_COVERAGE=32926,e.__proto__.SAMPLE_COVERAGE=32928,e.__proto__.NO_ERROR=0,e.__proto__.INVALID_ENUM=1280,e.__proto__.INVALID_VALUE=1281,e.__proto__.INVALID_OPERATION=1282,e.__proto__.OUT_OF_MEMORY=1285,e.__proto__.CW=2304,e.__proto__.CCW=2305,e.__proto__.LINE_WIDTH=2849,e.__proto__.ALIASED_POINT_SIZE_RANGE=33901,e.__proto__.ALIASED_LINE_WIDTH_RANGE=33902,e.__proto__.CULL_FACE_MODE=2885,e.__proto__.FRONT_FACE=2886,e.__proto__.DEPTH_RANGE=2928,e.__proto__.DEPTH_WRITEMASK=2930,e.__proto__.DEPTH_CLEAR_VALUE=2931,e.__proto__.DEPTH_FUNC=2932,e.__proto__.STENCIL_CLEAR_VALUE=2961,e.__proto__.STENCIL_FUNC=2962,e.__proto__.STENCIL_FAIL=2964,e.__proto__.STENCIL_PASS_DEPTH_FAIL=2965,e.__proto__.STENCIL_PASS_DEPTH_PASS=2966,e.__proto__.STENCIL_REF=2967,e.__proto__.STENCIL_VALUE_MASK=2963,e.__proto__.STENCIL_WRITEMASK=2968,e.__proto__.STENCIL_BACK_FUNC=34816,e.__proto__.STENCIL_BACK_FAIL=34817,e.__proto__.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e.__proto__.STENCIL_BACK_PASS_DEPTH_PASS=34819,e.__proto__.STENCIL_BACK_REF=36003,e.__proto__.STENCIL_BACK_VALUE_MASK=36004,e.__proto__.STENCIL_BACK_WRITEMASK=36005,e.__proto__.VIEWPORT=2978,e.__proto__.SCISSOR_BOX=3088,e.__proto__.COLOR_CLEAR_VALUE=3106,e.__proto__.COLOR_WRITEMASK=3107,e.__proto__.UNPACK_ALIGNMENT=3317,e.__proto__.PACK_ALIGNMENT=3333,e.__proto__.MAX_TEXTURE_SIZE=3379,e.__proto__.MAX_VIEWPORT_DIMS=3386,e.__proto__.SUBPIXEL_BITS=3408,e.__proto__.RED_BITS=3410,e.__proto__.GREEN_BITS=3411,e.__proto__.BLUE_BITS=3412,e.__proto__.ALPHA_BITS=3413,e.__proto__.DEPTH_BITS=3414,e.__proto__.STENCIL_BITS=3415,e.__proto__.POLYGON_OFFSET_UNITS=10752,e.__proto__.POLYGON_OFFSET_FACTOR=32824,e.__proto__.TEXTURE_BINDING_2D=32873,e.__proto__.SAMPLE_BUFFERS=32936,e.__proto__.SAMPLES=32937,e.__proto__.SAMPLE_COVERAGE_VALUE=32938,e.__proto__.SAMPLE_COVERAGE_INVERT=32939,e.__proto__.COMPRESSED_TEXTURE_FORMATS=34467,e.__proto__.COMPRESSED_RGB8_ETC2=37492,e.__proto__.COMPRESSED_RGBA8_ETC2_EAC=37496,e.__proto__.COMPRESSED_RGBA_ASTC_4x4_KHR=37808,e.__proto__.COMPRESSED_RGBA_ASTC_5x4_KHR=37809,e.__proto__.COMPRESSED_RGBA_ASTC_5x5_KHR=37810,e.__proto__.COMPRESSED_RGBA_ASTC_6x5_KHR=37811,e.__proto__.COMPRESSED_RGBA_ASTC_6x6_KHR=37812,e.__proto__.COMPRESSED_RGBA_ASTC_8x5_KHR=37813,e.__proto__.COMPRESSED_RGBA_ASTC_8x6_KHR=37814,e.__proto__.COMPRESSED_RGBA_ASTC_8x8_KHR=37815,e.__proto__.COMPRESSED_RGBA_ASTC_10x5_KHR=37816,e.__proto__.COMPRESSED_RGBA_ASTC_10x6_KHR=37817,e.__proto__.COMPRESSED_RGBA_ASTC_10x8_KHR=37818,e.__proto__.COMPRESSED_RGBA_ASTC_10x10_KHR=37819,e.__proto__.COMPRESSED_RGBA_ASTC_12x10_KHR=37820,e.__proto__.COMPRESSED_RGBA_ASTC_12x12_KHR=37821,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853,e.__proto__.COMPRESSED_RGB_ETC1_WEBGL=36196,e.__proto__.COMPRESSED_RGB_ATC_WEBGL=35986,e.__proto__.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987,e.__proto__.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798,e.__proto__.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,e.__proto__.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,e.__proto__.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841,e.__proto__.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843,e.__proto__.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,e.__proto__.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,e.__proto__.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,e.__proto__.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,e.__proto__.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919,e.__proto__.COMPRESSED_RED_RGTC1_EXT=36283,e.__proto__.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284,e.__proto__.COMPRESSED_RED_GREEN_RGTC2_EXT=36285,e.__proto__.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286,e.__proto__.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492,e.__proto__.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493,e.__proto__.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494,e.__proto__.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495,e.__proto__.DONT_CARE=4352,e.__proto__.FASTEST=4353,e.__proto__.NICEST=4354,e.__proto__.GENERATE_MIPMAP_HINT=33170,e.__proto__.BYTE=5120,e.__proto__.UNSIGNED_BYTE=5121,e.__proto__.SHORT=5122,e.__proto__.UNSIGNED_SHORT=5123,e.__proto__.INT=5124,e.__proto__.UNSIGNED_INT=5125,e.__proto__.FLOAT=5126,e.__proto__.DEPTH_COMPONENT=6402,e.__proto__.ALPHA=6406,e.__proto__.RGB=6407,e.__proto__.RGBA=6408,e.__proto__.LUMINANCE=6409,e.__proto__.LUMINANCE_ALPHA=6410,e.__proto__.UNSIGNED_SHORT_4_4_4_4=32819,e.__proto__.UNSIGNED_SHORT_5_5_5_1=32820,e.__proto__.UNSIGNED_SHORT_5_6_5=33635,e.__proto__.FRAGMENT_SHADER=35632,e.__proto__.VERTEX_SHADER=35633,e.__proto__.MAX_VERTEX_ATTRIBS=34921,e.__proto__.MAX_VERTEX_UNIFORM_VECTORS=36347,e.__proto__.MAX_VARYING_VECTORS=36348,e.__proto__.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e.__proto__.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e.__proto__.MAX_TEXTURE_IMAGE_UNITS=34930,e.__proto__.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e.__proto__.SHADER_TYPE=35663,e.__proto__.DELETE_STATUS=35712,e.__proto__.LINK_STATUS=35714,e.__proto__.VALIDATE_STATUS=35715,e.__proto__.ATTACHED_SHADERS=35717,e.__proto__.ACTIVE_UNIFORMS=35718,e.__proto__.ACTIVE_ATTRIBUTES=35721,e.__proto__.SHADING_LANGUAGE_VERSION=35724,e.__proto__.CURRENT_PROGRAM=35725,e.__proto__.NEVER=512,e.__proto__.LESS=513,e.__proto__.EQUAL=514,e.__proto__.LEQUAL=515,e.__proto__.GREATER=516,e.__proto__.NOTEQUAL=517,e.__proto__.GEQUAL=518,e.__proto__.ALWAYS=519,e.__proto__.KEEP=7680,e.__proto__.REPLACE=7681,e.__proto__.INCR=7682,e.__proto__.DECR=7683,e.__proto__.INVERT=5386,e.__proto__.INCR_WRAP=34055,e.__proto__.DECR_WRAP=34056,e.__proto__.VENDOR=7936,e.__proto__.RENDERER=7937,e.__proto__.VERSION=7938,e.__proto__.NEAREST=9728,e.__proto__.LINEAR=9729,e.__proto__.NEAREST_MIPMAP_NEAREST=9984,e.__proto__.LINEAR_MIPMAP_NEAREST=9985,e.__proto__.NEAREST_MIPMAP_LINEAR=9986,e.__proto__.LINEAR_MIPMAP_LINEAR=9987,e.__proto__.TEXTURE_MAG_FILTER=10240,e.__proto__.TEXTURE_MIN_FILTER=10241,e.__proto__.TEXTURE_WRAP_S=10242,e.__proto__.TEXTURE_WRAP_T=10243,e.__proto__.TEXTURE=5890,e.__proto__.TEXTURE_CUBE_MAP=34067,e.__proto__.TEXTURE_BINDING_CUBE_MAP=34068,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e.__proto__.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e.__proto__.TEXTURE0=33984,e.__proto__.TEXTURE1=33985,e.__proto__.TEXTURE2=33986,e.__proto__.TEXTURE3=33987,e.__proto__.TEXTURE4=33988,e.__proto__.TEXTURE5=33989,e.__proto__.TEXTURE6=33990,e.__proto__.TEXTURE7=33991,e.__proto__.TEXTURE8=33992,e.__proto__.TEXTURE9=33993,e.__proto__.TEXTURE10=33994,e.__proto__.TEXTURE11=33995,e.__proto__.TEXTURE12=33996,e.__proto__.TEXTURE13=33997,e.__proto__.TEXTURE14=33998,e.__proto__.TEXTURE15=33999,e.__proto__.TEXTURE16=34e3,e.__proto__.TEXTURE17=34001,e.__proto__.TEXTURE18=34002,e.__proto__.TEXTURE19=34003,e.__proto__.TEXTURE20=34004,e.__proto__.TEXTURE21=34005,e.__proto__.TEXTURE22=34006,e.__proto__.TEXTURE23=34007,e.__proto__.TEXTURE24=34008,e.__proto__.TEXTURE25=34009,e.__proto__.TEXTURE26=34010,e.__proto__.TEXTURE27=34011,e.__proto__.TEXTURE28=34012,e.__proto__.TEXTURE29=34013,e.__proto__.TEXTURE30=34014,e.__proto__.TEXTURE31=34015,e.__proto__.ACTIVE_TEXTURE=34016,e.__proto__.REPEAT=10497,e.__proto__.CLAMP_TO_EDGE=33071,e.__proto__.MIRRORED_REPEAT=33648,e.__proto__.FLOAT_VEC2=35664,e.__proto__.FLOAT_VEC3=35665,e.__proto__.FLOAT_VEC4=35666,e.__proto__.INT_VEC2=35667,e.__proto__.INT_VEC3=35668,e.__proto__.INT_VEC4=35669,e.__proto__.BOOL=35670,e.__proto__.BOOL_VEC2=35671,e.__proto__.BOOL_VEC3=35672,e.__proto__.BOOL_VEC4=35673,e.__proto__.FLOAT_MAT2=35674,e.__proto__.FLOAT_MAT3=35675,e.__proto__.FLOAT_MAT4=35676,e.__proto__.SAMPLER_2D=35678,e.__proto__.SAMPLER_CUBE=35680,e.__proto__.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e.__proto__.VERTEX_ATTRIB_ARRAY_SIZE=34339,e.__proto__.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e.__proto__.VERTEX_ATTRIB_ARRAY_TYPE=34341,e.__proto__.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e.__proto__.VERTEX_ATTRIB_ARRAY_POINTER=34373,e.__proto__.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e.__proto__.IMPLEMENTATION_COLOR_READ_TYPE=35738,e.__proto__.IMPLEMENTATION_COLOR_READ_FORMAT=35739,e.__proto__.COMPILE_STATUS=35713,e.__proto__.LOW_FLOAT=36336,e.__proto__.MEDIUM_FLOAT=36337,e.__proto__.HIGH_FLOAT=36338,e.__proto__.LOW_INT=36339,e.__proto__.MEDIUM_INT=36340,e.__proto__.HIGH_INT=36341,e.__proto__.FRAMEBUFFER=36160,e.__proto__.RENDERBUFFER=36161,e.__proto__.RGBA4=32854,e.__proto__.RGB5_A1=32855,e.__proto__.RGB565=36194,e.__proto__.DEPTH_COMPONENT16=33189,e.__proto__.STENCIL_INDEX8=36168,e.__proto__.DEPTH_STENCIL=34041,e.__proto__.RENDERBUFFER_WIDTH=36162,e.__proto__.RENDERBUFFER_HEIGHT=36163,e.__proto__.RENDERBUFFER_INTERNAL_FORMAT=36164,e.__proto__.RENDERBUFFER_RED_SIZE=36176,e.__proto__.RENDERBUFFER_GREEN_SIZE=36177,e.__proto__.RENDERBUFFER_BLUE_SIZE=36178,e.__proto__.RENDERBUFFER_ALPHA_SIZE=36179,e.__proto__.RENDERBUFFER_DEPTH_SIZE=36180,e.__proto__.RENDERBUFFER_STENCIL_SIZE=36181,e.__proto__.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e.__proto__.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e.__proto__.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e.__proto__.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e.__proto__.COLOR_ATTACHMENT0=36064,e.__proto__.DEPTH_ATTACHMENT=36096,e.__proto__.STENCIL_ATTACHMENT=36128,e.__proto__.DEPTH_STENCIL_ATTACHMENT=33306,e.__proto__.NONE=0,e.__proto__.FRAMEBUFFER_COMPLETE=36053,e.__proto__.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e.__proto__.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e.__proto__.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e.__proto__.FRAMEBUFFER_UNSUPPORTED=36061,e.__proto__.FRAMEBUFFER_BINDING=36006,e.__proto__.RENDERBUFFER_BINDING=36007,e.__proto__.MAX_RENDERBUFFER_SIZE=34024,e.__proto__.INVALID_FRAMEBUFFER_OPERATION=1286,e.__proto__.UNPACK_FLIP_Y_WEBGL=37440,e.__proto__.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e.__proto__.CONTEXT_LOST_WEBGL=37442,e.__proto__.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e.__proto__.BROWSER_DEFAULT_WEBGL=37444,e.__proto__.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070,e.__proto__.MIN_EXT=32775,e.__proto__.MAX_EXT=32776,e.__proto__.TEXTURE_MAX_ANISOTROPY_EXT=34046,e.__proto__.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047}function eventWrapper(t){t.prototype.addEventListener=function(t,e,r){if(this._handlers||(this._handlers={}),this.triggerEvent||(this.triggerEvent=function(t,e){var r=this;void 0===e&&(e={});if(e.target=this,!this._handlers)return;var n=this._handlers[t];n&&n.length&&n.forEach((function(t){t.call(r,e)}))}.bind(this)),e){var n=this._handlers[t];n?n.push(e):this._handlers[t]=[e]}},t.prototype.removeEventListener=function(t,e,r){if(this._handlers){var n=this._handlers[t];if(n){var o=Array.prototype.findIndex.call(n,(function(t){return e===t}));-1!=o&&n.splice(o,1)}}},t.prototype.dispatchEvent=function(t){var e=this,r=t.type;if(t.target=this,"function"==typeof this["on"+r]&&this["on"+r](t),this._handlers&&r in this._handlers){var n=this._handlers[r];n&&n.length&&n.forEach((function(r){r.call(e,t)}))}}}function initKrypton(t,e){var r=t.lynx,n=r.krypton;if(n){var o=n.CanvasElement,a=n.ImageElement;!function(t,e){if(!t)return;var r=t.prototype.getContext;t.prototype.getContext=function(t,n){if("webgl"===t||"webgl2"===t){var o=void 0;return(o=n?r.call(this,"webgl",n):r.call(this,"webgl"))?(redirect(e,o),o):null}return n?r.call(this,t,n):r.call(this,t)}}(o,n),eventWrapper(o),eventWrapper(a),n.createCanvas=function(t,e,r){if(o){if(t){var n=new o(t);return n.style={},e>0&&r>0&&(n.width=e,n.height=r,n.style={width:e,height:r}),n}return this.createOffscreenCanvas(e,r)}},n.createCanvasAsync=function(t){return new e((function(e,n){var a=new o(t),i=a.getBoundingClientRect();if(i)a.width=i.width,a.height=i.height,a.style.width=i.width,a.style.height=i.height,e(a);else{var s=r.setTimeout((function(){n("Create canvas timeout!!")}),4e3);a.addEventListener("ready",(function(t){var n=t.width,o=t.height;a.style.width=n,a.style.height=o,a.width=n,a.height=o,r.clearTimeout(s),e(a)}))}}))},n.createImage=function(t){if(a){var e=new a;return e.setLynxSrc=function(t){this.src=t},t&&(e.src=t),e}},n.createOffscreenCanvas=function(t,e){if(o){var r=new o;return r.style={},t>0&&e>0&&(r.width=t,r.height=e),r}},n.readFile=function(t,e,r){var o=r&&r.encoding?1:2;n._loadAsync(t,o,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.apply(void 0,__spreadArray([],__read(t)))}))},n.getUserMedia=function(t,e,r){var o,a;if(void 0===e&&(e=function(){}),void 0===r&&(r=function(){}),t&&t.video){var i=t.video instanceof Object?t.video:{};n._getUserMedia(!1,!0,null!==(o=i.facingMode)&&void 0!==o?o:"",null!==(a=i.resolution)&&void 0!==a?a:"",e)}else t&&t.audio?n._getUserMedia(!0,!1,"","",e):r("error params")}}}var defaultOption={};function initLoadDynamicComponentEnv(t,e){var r=t.lynx;r.loadDynamicComponent=function(t,n){return new e((function(e,o){r.fetchDynamicComponent(t,n||defaultOption,(function(t){t&&0==t.code?e(t):o(t)}))}))}}var ReactApp=function(){function ReactApp(t){var e=this;this.componentEventBatch={};var r=t.nativeApp,n=t.params,o=t.lynx;for(var a in this.modules={},this._apiList={},this._componentMap={},this._dynamicComponentMap={},this._componentInstance={},this._reactLynx={},this._nativeApp=r,this._params=n,this.rlynxVersion=null==n?void 0:n.rlynxVersion,this.globalErrorEvents=[],this._propsMap=new propsMap,this._reactLynx.propsMap=this._propsMap,this._reactLynx.genPropsId=genPropsId,this._reactLynx.ReactComponent=ReactComponent,this._reactLynx.createRef=function(){return{current:null,id:null}},this._getComponent=this.getComponent,this.setTimeout=r.setTimeout,this.setInterval=r.setInterval,this.clearInterval=r.clearInterval,this.clearTimeout=r.clearTimeout,this.NativeModules=r.nativeModuleProxy,this.NetworkingModule=r.nativeModuleProxy.NetworkingModule,this.LynxTestModule=r.nativeModuleProxy.LynxTestModule,this.BDLynxModule=r.nativeModuleProxy.BDLynxModule,this.nativeAppId=r.id,this.lynx={_switches:{}},this.lynx.onError=function(t){return e.subscribeGlobalError(t)},this.lynx.requireModule=this.requireModule.bind(this),this.lynx.requireModuleAsync=this.requireModuleAsync.bind(this),o)this.lynx[a]=o[a];this.lynx.setTimeout=this.setTimeout=this.wrapReport(r.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(r.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=r.clearInterval,this.lynx.clearTimeout=this.clearTimeout=r.clearTimeout,this.lynx.reportError=this.reportError.bind(this),this.GlobalEventEmitter=new EventEmitter(this.__internal__callNativeModule.bind(this)),this._lazyCallableModules=new Map,this._BDLynxAPIModule=new EventEmitter,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.setupPromise(r.setTimeout,r.clearTimeout),_global.installNapiModules&&_global.installNapiModules(this),initKrypton(this,this.lynx.Promise),initHeliumCanvas(this,this.lynx.Promise),this.setupIntersectionApi(),Hooks.mountHooks(this,{catchError:function(t){var r=new InternalRuntimeError("Hooks: "+e._nativeApp.id+" error: "+t.message,t.stack);reportThrowError({error:r,nativeApp:e._nativeApp,rawError:t,proxy:e}),e.publishGlobalError(r,"Hooks: "+e._nativeApp.id+" error: "+t.message,t.stack)}}),this._reactLynx.ReactFcComponent=ReactFcComponent,this._reactLynx.useReducer=Hooks.useReducer,this._reactLynx.useState=Hooks.useState,this._reactLynx.useEffect=Hooks.useEffect,this._reactLynx.useMemo=Hooks.useMemo,this._reactLynx.useCallback=Hooks.useCallback,this._reactLynx.useInstance=Hooks.useInstance,this._reactLynx.useRef=Hooks.useRef,this._reactLynx.createRef=function(t){return{current:t,id:null}},this.lynx.setSharedData=function(t,e){_global.sharedData[t]=e;var r={};r[t]=e,_global.shareDataSubject.notifyDataChange(r)},this.lynx.triggerLepusGlobalEvent=function(t,e){r.triggerLepusGlobalEvent(t,e)},this.lynx.getSharedData=function(t){return _global.sharedData[t]},this.lynx.registerSharedDataObserver=function(t){_global.shareDataSubject.registerObserver(t)},this.lynx.removeSharedDataObserver=function(t){_global.shareDataSubject.removeObserver(t)},initLoadDynamicComponentEnv(this,this.lynx.Promise)}return ReactApp.prototype.subscribeGlobalError=function(t){this.globalErrorEvents.push(t)},ReactApp.prototype.publishGlobalError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.globalErrorEvents&&this.globalErrorEvents.length>0&&this.globalErrorEvents.forEach((function(e){e.apply(void 0,__spreadArray([],__read(t)))}))},ReactApp.prototype.requireModule=function(t){if("string"!=typeof t||!t)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(t),(0,_global.initBundle)({tt:this})},ReactApp.prototype.requireModuleAsync=function(t,e){var r=this;if("string"!=typeof t||!t)throw new Error("importScript async should load with one path");r._nativeApp.loadScriptAsync(t,(function(t){var n,o;t?n=new Error("loadScriptAsync: "+r._nativeApp.id+" error: "+t):o=(0,_global.initBundle)({tt:r});e&&e(n,o)}))},ReactApp.prototype.reportError=function(t){var e;if("[object Error]"===Object.prototype.toString.call(t))e=t;else{var r=void 0;r="string"!=typeof t?JSON.stringify(r):t,e=new Error(r)}var n=new UserRuntimeError(e.message,e.stack);reportError(n,this._nativeApp,{proxy:this}),this.publishGlobalError(n,e.message,e.stack)},ReactApp.prototype.setupPromise=function(t,e){var r=this,n=getPromiseMaybePolyfill(t,(function(t,e){try{if(e.stack||(e=new Error("wrapError-"+JSON.stringify(e))),e){var n=new UserRuntimeError("unhandled rejection: "+e.message,e.stack);reportError(n,r._nativeApp,{proxy:r}),r.publishGlobalError(n,"unhandled rejection: "+e.message,e.stack)}}catch(t){}}),e);this.resolvedPromise=n.resolve(),this.lynx.Promise=n},Object.defineProperty(ReactApp.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"apiList",{set:function(t){this._apiList=__assign(__assign({},this._apiList),t)},enumerable:!1,configurable:!0}),ReactApp.prototype.Card=function(t){var e=this;try{var r=e._params||{},n=r.initData,o=r.updateData,a=r.initConfig;if(t.__config={$type:"card",appInstance:e,initData:n},e.appInstance=new t(t.defaultProps),n&&"object"==typeof n&&e.initCardData(n),o&&"object"==typeof o)try{var i=e.appInstance;Object.keys(o).forEach((function(t){i.state[t]=o[t]})),isFunctionComponent(i)&&Hooks.syncInsHookState(i,o)}catch(t){var s=t||{},_=s.message,p=s.stack;reportThrowError({error:c=new InternalRuntimeError("initCardData "+n+" error: "+(_="native updateCardData error in Card:  "+_),p),nativeApp:e._nativeApp,rawError:t,proxy:this}),e.publishGlobalError(c,"initCardData "+n+" error: "+_,p),e.dispatchError(_||p||"unknown error in updateCardState")}a&&"object"==typeof a&&e.processCardConfig(a)}catch(t){var c;reportThrowError({error:c=new InternalRuntimeError("create Card(): "+e._nativeApp.id+" error: "+t.message,t.stack),nativeApp:e._nativeApp,rawError:t,proxy:this}),this.publishGlobalError(c,"create Card(): "+e._nativeApp.id+" error: "+t.message,t.stack),this.dispatchError(t.message)}},ReactApp.prototype.Component=function(t){var e=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath;e||(e=DEFAULT_ENTRY),this._componentMap[e]||(this._componentMap[e]={}),this._componentMap[e][r]=t},ReactApp.prototype.initCardData=function(t){var e=this;try{var r=e.appInstance;Object.keys(t).forEach((function(e){hasProperty(r.state,e)||(r.state[e]=t[e])}))}catch(r){var n=r||{},o=n.message,a=n.stack,i=new InternalRuntimeError("initCardData "+t+" error: "+(o="native initCardData error in ReactCard:  "+o),a);reportThrowError({error:i,nativeApp:e._nativeApp,rawError:r,proxy:this}),e.publishGlobalError(i,"initCardData "+t+" error: "+o,a),e.dispatchError(o||a||"unknown error in initCardData")}},ReactApp.prototype.processCardConfig=function(t){var e=this,r=e.appInstance;try{if(t&&"object"==typeof t){var n=t[CARD_CONFIG_STR];if(isObject(n)){var o=n.theme;isObject(o)&&(r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o))}}}catch(t){var a=new InternalRuntimeError("processCardConfig Card(): "+e._nativeApp.id+" error: "+t.message,t.stack);reportThrowError({error:a,nativeApp:e._nativeApp,rawError:t,proxy:this}),this.publishGlobalError(a,"processCardConfig Card(): "+e._nativeApp.id+" error: "+t.message,t.stack),this.dispatchError(t.message)}},ReactApp.prototype.onReactCardRender=function(t,e){var r=this,n=r.appInstance;if("string"==typeof t&&(t=JSON.parse(t)),n.$cardInit)try{var o=this.processVersionsAndCheckForConflict(t,n);if(t&&"object"==typeof t&&Object.keys(t).forEach((function(e){isNull(t[e])||(n.state[e]=t[e]),isFunctionComponent(n)&&Hooks.syncInsHookState(n,t,!0)})),o)return void this.flushNative(n);if(!e)return;var a={},i={};n.$hasDerivedFunction&&!n.$shouldIgnoreLepusDataProcessor&&(a=n.$class.getDerivedStateFromProps(n.props||{},n.state)||{},i=diffData(n.state,a),n.state=Object.assign(n.state,a));var s=n.executeJSRender()||{},_=diffData(n.state,s);n.state=Object.assign(n.state,s);var p=Object.assign(i,_);Object.keys(p).length&&n.updateDataToNative(p)}catch(e){var c=e||{};h=c.message,f=c.stack;reportThrowError({error:l=new InternalRuntimeError("onReactCardRender not first "+t+" error: "+h,f),nativeApp:r._nativeApp,rawError:e,proxy:this}),r.publishGlobalError(l,"onReactCardRender not first "+t+" error: "+h,f),r.dispatchError(h||f||"unknown error in onReactCardRender")}else try{n.$cardInit=!0,this.flushNative(n)}catch(e){var l,u=e||{},h=u.message,f=u.stack;reportThrowError({error:l=new InternalRuntimeError("onReactCardRender first "+t+" error: "+h,f),nativeApp:r._nativeApp,rawError:e,proxy:this}),r.publishGlobalError(l,"onReactCardRender first "+t+" error: "+h,f),r.dispatchError(h||f||"unknown error in onReactCardRender")}},ReactApp.prototype.onReactComponentCreated=function(t,e,r,n,o){var a,i;nativeConsole.profile("onReactComponentCreated::"+t),t.startsWith("/")&&(t=t.substr(1));var s=o?this._componentMap[o][t]:this._componentMap[DEFAULT_ENTRY][t];s.defaultProps=s.defaultProps||{};var _=(r?this._propsMap.getProps(r.propsId):null)||{},p=Object.keys(s.defaultProps),c=Object.keys(_),l=__spreadArray([],__read(p));c.forEach((function(t){l.includes(t)||l.push(t)}));var u=Object.keys(r),h=l.filter((function(t){return!u.includes(t)||null===r[t]})),f={};Object.keys(s.defaultProps).filter((function(t){c.includes(t)&&null===_[t]?f[t]=null:f[t]=s.defaultProps[t]}));var d=shallowMergeEx(r,_);d=shallowMergeEx(f,d,!0),s.__config={$type:"component",appInstance:this};var v=new s(d);n&&"object"==typeof n&&REACT_NATIVE_STATE_VERSION_KEY in n&&(v.$nativeStateVersion=n[REACT_NATIVE_STATE_VERSION_KEY]),v.componentPath=t,v.entryName=o,this.setComponent(e,v);var E=[];Object.keys(v.state).forEach((function(t){hasProperty(n,t)&&(null!==n[t]&&void 0!==n[t]||null===v.state[t]||void 0===v.state[t])||E.push(t)}));var m=null;v.$hasDerivedFunction&&(h.length||E.length||!v.$shouldIgnoreLepusDataProcessor)?(m=v.$class.getDerivedStateFromProps(v.props,v.state),v.state=Object.assign(v.state,m||{})):v.$hasDerivedFunction&&(v.state=shallowMergeEx(v.state,n,!0));var y=v.executeJSRender()||{};v.state=Object.assign(v.state,y);var g=diffData(n,m);E.push.apply(E,__spreadArray(__spreadArray([],__read(Object.keys(g))),__read(Object.keys(y))));for(var A={},R=0;R<E.length;R++){var b=E[R];A[b]=v.state[b]}v.updateDataToNative(filterReactComponentData(A));var T=this.componentEventBatch[e];if(T&&(this.componentEventBatch[e]=void 0,Array.isArray(T)))try{for(var C=__values(T),S=C.next();!S.done;S=C.next()){var I=S.value;this.publicComponentEvent(e,I.eventName,I.data)}}catch(t){a={error:t}}finally{try{S&&!S.done&&(i=C.return)&&i.call(C)}finally{if(a)throw a.error}}nativeConsole.profileEnd()},ReactApp.prototype.onReactComponentRender=function(t,e,r,n){var o,a=this.getComponent(t);nativeConsole.profile("onReactComponentRender::"+a.componentPath);var i,s=shallowClone(this._propsMap.getProps(e.propsId));i=(null===(o=this.lynx._switches)||void 0===o?void 0:o.fixMergeOrder)?shallowMergeEx(e,s):shallowMergeEx(s,e),Object.keys(i).forEach((function(t){a.props[t]=i[t]}));var _=this.processVersionsAndCheckForConflict(r,a);if(r&&"object"==typeof r&&Object.keys(r).forEach((function(t){isNull(r[t])||(a.state[t]=r[t]),isFunctionComponent(a)&&Hooks.syncInsHookState(a,r,!0)})),_)return this.flushNative(a),void nativeConsole.profileEnd();if(n){var p=Object.keys(s),c=Object.keys(e),l=p.filter((function(t){return nativeConsole.profileEnd(),!c.includes(t)||null===e[t]})),u={},h={};!a.$hasDerivedFunction||a.$shouldIgnoreLepusDataProcessor&&!l.length?a.$hasDerivedFunction&&(a.state=Object.assign(a.state,r||{})):(u=a.$class.getDerivedStateFromProps(a.props,a.state),h=diffData(a.state,u),a.state=Object.assign(a.state,u||{}));var f=a.executeJSRender()||{},d={};!a.$shouldDiffState&&isEmptyObject(u)||(d=diffData(a.state,f)),a.state=Object.assign(a.state,f||{});var v=Object.assign(h,d);Object.keys(v).length&&a.updateDataToNative(v),nativeConsole.profileEnd()}else nativeConsole.profileEnd()},ReactApp.prototype.processVersionsAndCheckForConflict=function(t,e){var r=!1;return t&&"object"==typeof t&&(REACT_NATIVE_STATE_VERSION_KEY in t&&(e.$nativeStateVersion=t[REACT_NATIVE_STATE_VERSION_KEY]),REACT_JS_STATE_VERSION_KEY in t&&t[REACT_JS_STATE_VERSION_KEY]<e.$jsStateVersion&&(r=!0),delete t[REACT_NATIVE_STATE_VERSION_KEY],delete t[REACT_JS_STATE_VERSION_KEY]),r},ReactApp.prototype.flushNative=function(t){var e={};t.$hasDerivedFunction&&(e=t.$class.getDerivedStateFromProps(t.props,t.state)),t.state=Object.assign(t.state,e||{}),t.state=Object.assign(t.state,t.executeJSRender()||{}),t.updateDataToNative(filterReactComponentData(t.state))},ReactApp.prototype.reactUpdateComponent=function(t){t.$init?t.$hasDidUpdateLifecycle&&(t.componentDidUpdate(t.prevProps,t.prevState),t.prevProps=deepClone(t.props),t.prevState=deepClone(t.state)):(t.$init=!0,t.componentDidMount(),t.$hasDidUpdateLifecycle&&(t.prevProps=deepClone(t.props),t.prevState=deepClone(t.state))),isFunctionComponent(t)&&Hooks.executeEffects(t)},ReactApp.prototype.onReactCardDidUpdate=function(){var t=this.appInstance;this.reactUpdateComponent(t)},ReactApp.prototype.onReactComponentDidUpdate=function(t){var e=this.getComponent(t);nativeConsole.profile("onReactComponentDidUpdate::"+e.componentPath),this.reactUpdateComponent(e),nativeConsole.profileEnd()},ReactApp.prototype.onReactComponentUnmount=function(t){var e=this.getComponent(t);nativeConsole.profile("onReactComponentUnmount::"+e.componentPath);var r=e.props?e.props.propsId:null;r&&this._propsMap.deleteProps(r),isFunctionComponent(e)&&Hooks.cleanUpHooks(e),e.componentWillUnmount(),e=null,delete this._componentInstance[t],nativeConsole.profileEnd()},ReactApp.prototype.onNativeAppReady=function(t){},ReactApp.prototype.callFunction=function(t,e,r){var n=this.appInstance;try{var o=n.getJSModule(t);"function"==typeof o[e]&&o[e].apply(o,r)}catch(r){var a=r||{},i=a.message,s=a.stack,_=new InternalRuntimeError("callFunction "+t+"/"+e+" error: "+i,s);reportThrowError({error:_,nativeApp:this._nativeApp,rawError:r,proxy:this}),this.publishGlobalError(_,"callFunction "+t+"/"+e+" error: "+i,s),this.dispatchError(i||s||"unknown error in callFunction")}},ReactApp.prototype.setComponent=function(t,e){this._componentInstance[t]=e,e.componentId=t},ReactApp.prototype.getComponent=function(t){return this._componentInstance[t]},ReactApp.prototype.getComponentOptions=function(t,e){return e?this._dynamicComponentMap[e][t]:this._dynamicComponentMap[DEFAULT_ENTRY][t]},ReactApp.prototype.setupIntersectionApi=function(){var t=this;this._apiList.createIntersectionObserver=function(e,r){var n=e.componentId,o=void 0===n?"":n;return t._intersectionObserverManager.createIntersectionObserver(o,r)},this.lynx.createIntersectionObserver=this._apiList.createIntersectionObserver},ReactApp.prototype.onIntersectionObserverEvent=function(t,e,r){var n=this._intersectionObserverManager.getObserver(t);n&&n.invokeCallback(e,r)},ReactApp.prototype.publishEvent=function(t,e){var r=this,n=r.appInstance;try{if("function"==typeof n[t])return void r.handlerEvent(n,t,e);throw new Error("Do not have "+t+"\n        handler in Card "+r._nativeApp.id)}catch(e){var o=e||{},a=o.message,i=o.stack,s=new InternalRuntimeError("publishEvent "+t+" error: "+a,i);reportThrowError({error:s,nativeApp:this._nativeApp,rawError:e,proxy:this}),r.publishGlobalError(s,"publishEvent "+t+" error: "+a,i),r.dispatchError(a||i||"unknown error in publishEvent")}},ReactApp.prototype.saveComponentEventBatch=function(t,e,r){this.componentEventBatch[t]||(this.componentEventBatch[t]=[]),this.componentEventBatch[t].push({eventName:e,data:r})},ReactApp.prototype.publicComponentEvent=function(t,e,r){var n=this,o=n.getComponent(t);if(o)try{"function"==typeof o[e]&&n.handlerEvent(o,e,r)}catch(r){var a=r||{},i=a.message,s=a.stack,_=new InternalRuntimeError("publicComponentEvent "+t+"/"+e+" error: "+i,s);reportThrowError({error:_,nativeApp:this._nativeApp,rawError:r,proxy:this}),n.publishGlobalError(_,"publicComponentEvent "+t+"/"+e+" error: "+i,s),n.dispatchError(i||s||"unknown error in publicComponentEvent")}else n.saveComponentEventBatch(t,e,r)},ReactApp.prototype.handlerEvent=function(t,e,r){var n=t,o=[],a=[],i={},s=r.type,_=r.currentTarget.dataset||{};r.preventDefault=function(){},r.stopPropagation=function(){},Object.keys(_).forEach((function(t){var e=t.toLocaleLowerCase();if(/^e/.test(e)&&(e=e.replace(/^e/,"")).indexOf(s)>=0){var r=e.replace(s,"");/^(a[a-z]|so)$/.test(r)&&(i[r]=_[t])}}));var p=null;"so"in i&&(n="this"!==i.so?i.so:t,p="this"!==i.so?i.so:null,delete i.so),isObject(i)&&(a=Object.keys(i).sort().map((function(t){return i[t]}))),o=-1===e.indexOf("funPrivate")?__spreadArray(__spreadArray([],__read(a)),[r]):__spreadArray(__spreadArray([p],__read(a)),[r]),t[e].apply(n,o)},ReactApp.prototype.callDestroyLifetimeFun=function(){var t=this;try{Object.keys(this._componentInstance).forEach((function(e){t.onReactComponentUnmount(e)})),this.appInstance.componentWillUnmount()}catch(t){}},ReactApp.prototype.destroy=function(){try{isFunctionComponent(this.appInstance)&&Hooks.cleanUpHooks(this.appInstance),this.modules=null,this._params=null,this._componentMap=null,this._propsMap=null,this.appInstance=null,this.GlobalEventEmitter=null,this._BDLynxAPIModule=null,this._lazyCallableModules=null,this._nativeApp=null,this.componentEventBatch=null,this._heliumData&&clearHeliumCanvas(this)}catch(t){}},ReactApp.prototype.onAppEnterBackground=function(t){var e=this;try{e.appInstance&&isFunction(this.appInstance.componentDidHide)&&e.appInstance.componentDidHide(t),this.GlobalEventEmitter.emit("onHide",t)}catch(t){var r=t||{},n=r.message,o=r.stack,a=new InternalRuntimeError("onAppEnterBackground error: "+n,o);reportThrowError({error:a,nativeApp:this._nativeApp,rawError:t,proxy:this}),e.publishGlobalError(a,"onAppEnterBackground error: "+n,o),e.dispatchError(n||o||"unknown error in onAppEnterBackground")}},ReactApp.prototype.onAppEnterForeground=function(t){var e=this;try{e.appInstance&&isFunction(this.appInstance.componentDidShow)&&e.appInstance.componentDidShow(t),this.GlobalEventEmitter.emit("onShow",t)}catch(i){var r=i||{},n=r.message,o=r.stack,a=new InternalRuntimeError("onAppEnterForeground "+t+" error: "+n,o);reportThrowError({error:a,nativeApp:this._nativeApp,rawError:i,proxy:this}),e.publishGlobalError(a,"onAppEnterForeground "+t+" error: "+n,o),e.dispatchError(n||o||"unknown error in onAppEnterForeground")}},ReactApp.prototype.onAppError=function(t){this.dispatchError(t);var e=new InternalRuntimeError("JS error from native: "+t,t);reportError(e,this._nativeApp,{proxy:this}),this.publishGlobalError(e,"onAppError, JS error from native: "+t,null)},ReactApp.prototype.dispatchError=function(t){this.appInstance&&isFunction(this.appInstance.componentDidCatch)&&this.appInstance.componentDidCatch(t)},ReactApp.prototype.onAppFirstScreen=function(t){},ReactApp.prototype.registerModule=function(t,e){this._lazyCallableModules[t]=e},ReactApp.prototype.__internal__callNativeModule=function(t,e,r){var n=this._nativeApp.nativeModuleProxy[t];if(n){var o=n[e];o&&Function.prototype.apply.call(o,void 0,r)}},ReactApp.prototype.wrapReport=function(t,e){var r=this;function n(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(this,n)}catch(t){var a=new UserRuntimeError(e+": "+r._nativeApp.id+" error: "+t.message,t.stack);reportThrowError({error:a,nativeApp:r._nativeApp,rawError:t,proxy:r}),r.publishGlobalError(a,e+": "+r._nativeApp.id+" error: "+t.message,t.stack)}}}return function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(t,void 0,__spreadArray([n(e)],__read(r)))}},ReactApp.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=params&&params.dynamicComponentEntry?params.dynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(t){var throwError=new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+t.message,t.stack);reportThrowError({error:throwError,nativeApp:this._nativeApp,rawError:t,proxy:this}),that.publishGlobalError(throwError,"eval user: "+that._nativeApp.id+" error: "+t.message,t.stack)}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),that._reactLynx,that.nativeAppId,void 0,LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},ReactApp.prototype.define=function(t,e,r){var n=this,o=r||DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][t]={runed:!1,factory:e.bind(n)}},ReactApp.prototype.bindComponentWithRefId=function(t,e,r){if("card"===t)this.appInstance.$pureData[r]=e,this.appInstance.bindSingleRef(r);else{var n=this._componentInstance[t];isObject(n)?(n.$pureData[r]=e,n.bindSingleRef(r)):(this.appInstance.$pureData[r]=e,this.appInstance.bindSingleRef(r))}},ReactApp}();function pathProcess(t){var e=t.match(/(.*)\/([^/]+)?$/);return(null==e?void 0:e[1])?e[1]:"./"}function inRequire(t){var e=this,r=pathProcess(t);return function(t){var n=[],o=(r+"/"+t).split("/"),a=o.length;if("string"!=typeof t)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+t+" in app: "+e._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var _=n.join("/");return _.endsWith(".js")||(_+=".js"),e.require(_)}}function parsePath(t){if("string"!==getDataType(t)){var e="path should be string";throw nativeConsole.error("TypeError",e),new AppServiceEngineKnownError(e)}for(var r=!1,n=!1,o=t.length,a=[],i="",s=0,_=0;_<o;_++){var p=t[_];if("\\"===p)_+1<o&&("."===t[_+1]||"["===t[_+1]||"]"===t[_+1])?(i+=t[_+1],_++):i+="\\";else if("."===p)i&&(a.push(i),i="");else if("["===p){if(i&&(a.push(i),i=""),0===a.length)throw nativeConsole.error("DataPathError","Path can not start with []: "+t),new AppServiceEngineKnownError("Path can not start with []: "+t);n=!0,r=!1}else if("]"===p){if(!r)throw nativeConsole.error("DataPathError","Must have number in []: "+t),new AppServiceEngineKnownError("Must have number in []: "+t);n=!1,a.push(s),s=0}else if(n){if(p<"0"||p>"9")throw nativeConsole.error("DataPathError","Only number 0-9 could inside []: "+t),new AppServiceEngineKnownError("Only number 0-9 could inside []: "+t);r=!0,s=10*s+p.charCodeAt(0)-48}else i+=p}if(n)throw nativeConsole.error("DataPathError","[] should appear in pair: "+t),new AppServiceEngineKnownError("[] should appear in pair: "+t);if(i&&a.push(i),0===a.length)throw nativeConsole.error("DataPathError","Path can not be empty"),new AppServiceEngineKnownError("Path can not be empty");return a}function getObjectByPath(t,e){for(var r={},n=void 0,o=parsePath(e),a=t,i=0;i<o.length;i++){if(Number(o[i]==o[i]&&o[i]%1==0)){if(!Array.isArray(a))throw nativeConsole.error("DataPathError', 'Expected Array but not. key: "+e),new AppServiceEngineKnownError("DataPathError', 'Expected Array but not. key: "+e)}else if("object"!==getDataType(a))throw nativeConsole.error("DataPathError', 'Expected Object but not. key: "+e),new AppServiceEngineKnownError("DataPathError', 'Expected Object but not. key: "+e);n=o[i],r=a,a=a[o[i]]}return{obj:r,key:n}}var BaseInstance=function(){function t(t){var e=t.type,r=t.componentId,n=void 0===r?"":r,o=t.resolvedPromise;this._pendingState=null,this._cbs=null,this._type=e,this._componentId=n,this.resolvedPromise=o}return t.prototype.nextTick=function(t){this.resolvedPromise.then(t)},t.prototype.updateData=function(t){for(var e in t){void 0===t[e]&&nativeConsole.error("setData field "+e+" to undefined not work");var r=getObjectByPath(this.data,e),n=r.obj,o=r.key;n&&(n[o]=deepClone(t[e]))}},t.prototype.dataQueueUpdate=function(t,e,r){var n=this,o=n._pendingState,a=t._queue;if(isNullOrUndef(o))n._pendingState=e;else for(var i in e)({}).hasOwnProperty.call(e,i)&&(o[i]=e[i]);a.includes(n)||a.push(n),isFunction(r)&&(Array.isArray(n._cbs)||(n._cbs=[]),n._cbs.push(r.bind(n))),t._microTaskPending||(t._microTaskPending=!0,this.nextTick((function(){var e,r=[];for(t._microTaskPending=!1;e=a.pop();){var n=e._type,o=e.componentId,i=e._cbs,s=e._pendingState,_=callbackMerge$1.bind(e,i);e._pendingState=null,e._cbs=null,r.push({type:n,componentId:o,data:s,callback:_})}t._nativeApp.batchedUpdateData(r)})))},t}();function callbackMerge$1(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)t[e]()}var CreateApp=function(t){function e(e,r,n,o){var a=t.call(this,{type:"card",resolvedPromise:n})||this,i=a;a.__proxy=o,a.$parent=null,i.$children=[],i._lazyCallableModules=new Map,i._queue=[],i._microTaskPending=!1,i._nativeApp=r,a._options=e,i.data=e.data||{},delete e.data;var s=(_global.BDLynxSDKCore||{}).registerNativeEvent;i.theme=e.theme||{},delete e.theme;var _=Object.assign({},lifeCycleFun,e),p=e.methods||{};return Object.keys(p).forEach((function(t){"function"==typeof p[t]&&(i[t]=wrapUserFunction("at Card methods: "+t,i,p[t]).bind(i))})),Object.keys(_).forEach((function(t){"function"==typeof _[t]?i[t]=wrapUserFunction("at Card "+t,i,_[t]).bind(i):i[t]=deepClone(_[t])})),a.GlobalEventEmitter=new EventEmitter(a.__internal__callNativeModule.bind(a)),a.registerModule("GlobalEventEmitter",a.GlobalEventEmitter),a.registerModule("BDLynxAPIModule",new EventEmitter),"function"==typeof s&&s(i._lazyCallableModules.BDLynxAPIModule),a}return __extends(e,t),e.prototype.setData=function(e,r){var n=this;try{var o=getDataType(e);if("object"!==o)throw new Error("setData's first param must be object, you pass "+o);var a=getDataType(r);if(r&&"function"!==a)throw new Error("setData's second param must be function, you pass "+a);t.prototype.updateData.call(this,e),t.prototype.dataQueueUpdate.call(this,n,e,wrapUserFunction("at card setData/dataQueueUpdate",n,r).bind(n))}catch(t){var i=t||{},s=i.message,_=i.stack;reportError(new InternalRuntimeError("setData error: "+(s="setData err: "+s),_),n._nativeApp),n.onError(s)}},e.prototype.getNodeRef=function(t){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t)},e.prototype.getElementById=function(t){return new Element("card",t,this.__proxy.lynx)},e.prototype.getRoot=function(){return new Element("card",void 0,this.__proxy.lynx)},e.prototype.selectComponent=function(t,e){var r=this,n=getDataType(e);if(e&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent("card",t,!0,wrapUserFunction("at card selectComponent",this,(function(t){Array.isArray(t)&&e(r.__proxy.getComponent(t[0]))})).bind(this))},e.prototype.updateTheme=function(t,e){void 0===e&&(e=!1);var r=this;try{var n=getDataType(t);if("object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};e?Object.assign(o,t):Object.assign(o,r.theme,t),Object.keys(o).forEach((function(t){o[t]||delete o[t]})),r._nativeApp.updateData({__card_config_:{theme:o}})}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateTheme error: "+(i="updateTheme err: "+i),s),r._nativeApp),r.onError(i)}},e.prototype.registerModule=function(t,e){this._lazyCallableModules[t]=e},e.prototype.getJSModule=function(t){return this._lazyCallableModules[t]},e.prototype.addGlobalEventListener=function(t,e,r){this.getJSModule("GlobalEventEmitter").addListener(t,e,r)},e.prototype.setSharedData=function(t,e){_global.sharedData[t]=e},e.prototype.getSharedData=function(t){return _global.sharedData[t]},e.prototype.__internal__callNativeModule=function(t,e,r){var n=this._nativeApp.nativeModuleProxy[t];if(n){var o=n[e];o&&Function.prototype.apply.call(o,void 0,r)}},e}(BaseInstance);function optionProcess(t){return __assign({},t)}var behaviorBookmarks=new Map;function mixinBehaviors(t){var e={created:[t.created],attached:[t.attached],ready:[t.ready],moved:[t.moved],detached:[t.detached]};Array.isArray(t.behaviors)&&forEachRight(t.behaviors,(function(t){var r=behaviorBookmarks.get(t);r&&componentLifeCycles.forEach((function(t){"function"==typeof r[t]&&e[t].push(r[t])}))})),componentLifeCycles.forEach((function(r){t[r]=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e[r].forEach((function(e){return e.apply(t,n)}))}}))}function createBehavior(t,e){var r=t||{},n=r.created,o=void 0===n?noop$1:n,a=r.attached,i=void 0===a?noop$1:a,s=r.ready,_=void 0===s?noop$1:s,p=r.moved,c=void 0===p?noop$1:p,l=r.detached,u=void 0===l?noop$1:l;t=__assign({},t);var h=Object.assign(t,{created:o,attached:i,ready:_,moved:c,detached:u}),f=__assign({},h);return mixinBehaviors(f),f}function registerBehavior(t){try{if(isObject(t)){var e=guid(),r=Object.keys(t).reduce((function(e,r){return componentLifeCycles.includes(r)&&"function"==typeof t[r]&&(e[r]=t[r]),e}),{});return behaviorBookmarks.set(e,r),e}}catch(t){var n=t||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("registerBehavior  "+o,a),this._nativeApp,{proxy:this}),this._appInstance.onError(o||a||"unknow error in registerBehavior")}}var Component=function(t){function e(e,r,n,o){var a=t.call(this,{type:"component",componentId:e,resolvedPromise:o})||this,i=a,s=deepClone(n),_=(s=createBehavior(s)).methods||{},p=s.pageLifetimes||{},c=s.lifetimes||{};i.$parent=null,i.$children=[],i._initDataUpdated=!1,i._appInstance=r.appInstance,i._proxyInstance=r,i.componentId=e,i.behaviors=s.behaviors||[],i._nativeApp=r.nativeApp,i._lifetimes=c,i._pageLifetimes=p,a.GlobalEventEmitter=r.appInstance.GlobalEventEmitter,isObject(s.data)||(s.data={}),isObject(s.properties)||(s.properties={});var l=s.data;for(var u in i._initData=__assign({},l),s.properties)l[u]=s.properties[u].value;return i.data=i.properties=l,i._properties=s.properties||{},Object.keys(_).forEach((function(t){"function"==typeof _[t]&&(i[t]=wrapUserFunction("at component methods "+t,i._appInstance,_[t]).bind(i))})),Object.keys(s).forEach((function(t){"function"==typeof s[t]&&(i[t]=wrapUserFunction("at component option "+t,i._appInstance,s[t]).bind(i))})),a}return __extends(e,t),e.prototype.getNodeRef=function(t){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,t)},e.prototype.getNodeRefFromRoot=function(t){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t)},e.prototype.getElementById=function(t){return new Element(this.componentId,t,this._proxyInstance.lynx)},e.prototype.selectComponent=function(t,e){var r=this,n=getDataType(e);if(e&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent(this.componentId,t,!0,wrapUserFunction("at component selectComponent",this,(function(t){Array.isArray(t)&&e(r._proxyInstance.getComponent(t[0]))})).bind(this))},e.prototype.getJSModule=function(t){return this._appInstance._lazyCallableModules[t]},e.prototype.setData=function(e,r){var n=this,o=n.componentId,a=n._initData;try{var i=getDataType(e);if("object"!==i)throw new Error("setData's first param must be object, you pass "+i);var s=getDataType(r);if(r&&"function"!==s)throw new Error("setData's second param must be function, you pass "+s);n._initDataUpdated||(n._nativeApp.updateComponentData(o,a,null),n._initDataUpdated=!0),t.prototype.updateData.call(this,e),t.prototype.dataQueueUpdate.call(this,n._appInstance,e,wrapUserFunction("at Component setData",n._appInstance,r).bind(n))}catch(t){var _=t||{},p=_.message,c=_.stack;reportError(new InternalRuntimeError("Component "+(p="setData err: "+p),c),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(p)}},e.prototype.triggerEvent=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(t,{eventDetail:e,eventOption:r,componentId:o})}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("Component "+(i="triggerEvent error: "+i),s),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(i)}},e}(BaseInstance);function componentActivity(t,e,r,n,o){var a=this,i=o||{},s=i.initData,_=i.entryName,p=i.parentId;try{if(!componentLifeCycles.includes(e))return;if("created"===e){n.startsWith("/")&&(n=n.substr(1));var c=a.getComponentOptions(n,_),l=null;if(!isObject(c))throw new Error("component: "+n+" is not exist!");try{l=new Component(r,a,c,t)}catch(t){throw new Error("create component error: "+t)}if(isObject(s)&&Object.keys(s).forEach((function(t){hasProperty(l.data,t)||(l.data[t]=s[t])})),isString(p)){var u=null;(u="card"===p?a.appInstance:a.getComponent(p))&&(l.$parent=u,u.$children.push(l))}a.setComponent(r,l)}var h=a.getComponent(r);if("attached"===e&&!h._initDataUpdated){var f=!0;a.allRemoved&&(f=!a.allRemoved[n]),f&&a._nativeApp.updateComponentData(r,h._initData,null),h._initDataUpdated=!0}if(!h)throw new Error("component instance: "+r+" is not exist");markComponentState(h,e);var d=(h._lifetimes||{})[e]||h[e];if("function"==typeof d&&d(o),"detached"===e){var v=h.$parent,E=(v||{}).$children;if(Array.isArray(E)){var m=[];E.forEach((function(t){t.componentId!==r&&m.push(t)})),v.$children=m}h.$parent=null}}catch(t){var y=t||{},g=y.message,A=y.stack;reportError(new InternalRuntimeError("componentActivity "+e+"/"+r+"/"+n+" error: "+t.message,t.stack),a._nativeApp,{proxy:this}),a._appInstance.onError(g||A||"unknow error in componentActivity")}}function markComponentState(t,e){"attached"===e?t.componentState="attached":"detached"===e?t.componentState="detached":"ready"===e?(t.componentState="ready",t.$_internal_shouldStopBatching=!0):"moved"===e?t.componentState="moved":"created"===e&&(t.componentState="created")}function pageLifetimeFun(t,e){void 0===e&&(e={});var r=this._componentInstance||{};Object.keys(r).forEach((function(n){var o=r[n],a=(o._pageLifetimes||{})[t];"function"==typeof a&&a.call(o,e)}))}var UpdateDataType={UPDATE:0,RESET:1},AppProxy=function(){function AppProxy(t){this.componentEventBatch={};var e=t.nativeApp,r=t.params,n=t.lynx;for(var o in this.modules={},this._apiList={},this._componentOpts={},this._componentInstance={},this._nativeApp=e,this._params=r,this.lynx={},n)this.lynx[o]=n[o];this.lynx.requireModule=this.requireModule.bind(this),this.lynx.requireModuleAsync=this.requireModuleAsync.bind(this),this.lynx.setTimeout=this.setTimeout=this.wrapReport(e.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(e.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=e.clearInterval,this.lynx.clearTimeout=this.clearTimeout=e.clearTimeout,this.NativeModules=e.nativeModuleProxy,this.NetworkingModule=e.nativeModuleProxy.NetworkingModule,this.LynxTestModule=e.nativeModuleProxy.LynxTestModule,this.BDLynxModule=e.nativeModuleProxy.BDLynxModule,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.nativeAppId=e.id,this.setupPromise(e.setTimeout,e.clearTimeout),this.lynx.Navigator=e.nativeModuleProxy.NavigationModule,_global.installNapiModules&&_global.installNapiModules(this),initKrypton(this,this.lynx.Promise),initHeliumCanvas(this,this.lynx.Promise),this.setupInteralApi(),this.lynx.setSharedData=function(t,e){_global.sharedData[t]=e;var r={};r[t]=e,_global.shareDataSubject.notifyDataChange(r)},this.lynx.triggerLepusGlobalEvent=function(t,r){e.triggerLepusGlobalEvent(t,r)},this.lynx.getSharedData=function(t){return _global.sharedData[t]},this.lynx.registerSharedDataObserver=function(t){_global.shareDataSubject.registerObserver(t)},this.lynx.removeSharedDataObserver=function(t){_global.shareDataSubject.removeObserver(t)},initLoadDynamicComponentEnv(this,this.lynx.Promise)}return AppProxy.prototype.setupPromise=function(t,e){var r=this,n=getPromiseMaybePolyfill(t,(function(t,e){try{e.stack||(e=new Error("wrapError-"+JSON.stringify(e))),e&&reportError(new UserRuntimeError("unhandled rejection: "+e.message,e.stack),r._nativeApp,{proxy:r})}catch(t){}}),e);this.resolvedPromise=n.resolve(),this.lynx.Promise=n,this.lynx.reportError=this.reportError.bind(this)},AppProxy.prototype.wrapReport=function(t,e){var r=this;function n(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(this,n)}catch(t){reportError(new UserRuntimeError(e+": "+r._nativeApp.id+" error: "+t.message,t.stack),r._nativeApp,{proxy:r})}}}return function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(t,void 0,__spreadArray([n(e)],__read(r)))}},AppProxy.prototype.setupInteralApi=function(){var t=this;this._apiList.createIntersectionObserver=function(e,r){var n=e.componentId,o=void 0===n?"":n;return t._intersectionObserverManager.createIntersectionObserver(o,r)}},Object.defineProperty(AppProxy.prototype,"apiList",{set:function(t){this._apiList=__assign(__assign({},this._apiList),t)},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"appInstance",{get:function(){return this._appInstance},set:function(t){this._appInstance=t},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),AppProxy.prototype.setAllRemoved=function(t){this.allRemoved=t},AppProxy.prototype.reportError=function(t){var e;if("[object Error]"===Object.prototype.toString.call(t))e=t;else{var r=void 0;r="string"!=typeof t?JSON.stringify(r):t,e=new Error(r)}reportError(new UserRuntimeError(e.message,e.stack),this._nativeApp,{proxy:this})},AppProxy.prototype.requireModule=function(t){if("string"!=typeof t||!t)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(t),(0,_global.initBundle)({tt:this})},AppProxy.prototype.requireModuleAsync=function(t,e){var r=this;if("string"!=typeof t||!t)throw new Error("importScript async should load with one path");r._nativeApp.loadScriptAsync(t,(function(t){var n,o;t?n=new Error("loadScriptAsync: "+r._nativeApp.id+" error: "+t):o=(0,_global.initBundle)({tt:r});e&&e(n,o)}))},AppProxy.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(t){reportError(new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+t.message,t.stack),that._nativeApp,{proxy:that})}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire$1.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),_global.TaroLynx,that.nativeAppId,that.Behavior.bind(tt),LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},AppProxy.prototype.define=function(t,e,r){var n=this,o=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][t]={runed:!1,factory:e.bind(n)}},AppProxy.prototype.Card=function(t){var e=this,r=_global.globComponentRegistPath;this._cardPath=r;try{var n=e._params||{},o=n.initData,a=n.updateData,i=n.initConfig;e._appInstance=new CreateApp(t,e._nativeApp,this.resolvedPromise,e),e.lynx.getJSModule=e._appInstance.getJSModule.bind(e._appInstance),o&&"object"==typeof o&&e.initCardData(o),a&&"object"==typeof a&&e.updateCardData(a),i&&"object"==typeof i&&e.processCardConfig(i),e._appInstance.cardState="loaded",e._appInstance.onLoad({}),pageLifetimeFun.call(e,"onLoad")}catch(t){reportError(new InternalRuntimeError("create Card: "+e._nativeApp.id+" error: "+t.message,t.stack),e._nativeApp,{proxy:e}),e._appInstance.onError(t.message)}},AppProxy.prototype.Behavior=function(t){return registerBehavior.call(this,t)},AppProxy.prototype.Component=function(t){var e=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath,n=optionProcess(t);e||(e=DEFAULT_ENTRY),this._componentOpts[e]||(this._componentOpts[e]={}),this._componentOpts[e][r]=n},AppProxy.prototype.setComponent=function(t,e){this._componentInstance[t]=e},AppProxy.prototype.getComponent=function(t){return this._componentInstance[t]},AppProxy.prototype.getComponentOptions=function(t,e){var r=null;try{r=e?this._componentOpts[e][t]:this._componentOpts[DEFAULT_ENTRY][t]}catch(e){throw new Error("Component ("+t+") is not register. \n please use Component({...}) to register.")}return r},AppProxy.prototype.callDestroyLifetimeFun=function(){try{pageLifetimeFun.call(this,"onDestroy"),this._appInstance.onDestroy()}catch(t){}},AppProxy.prototype.destroy=function(){try{this.modules=null,this._params=null,this._appInstance.cardState="destroyed",this._appInstance=null,this._nativeApp=null,this.resolvedPromise=null,this._heliumData&&clearHeliumCanvas(this)}catch(t){}},AppProxy.prototype.publishEvent=function(t,e){var r=this,n=r._appInstance,o=n._options[t];try{if("function"==typeof n[t])return void n[t](e);if("function"==typeof o)return void o.call(n,e);throw new Error("Do not have "+t+"\n        handler in Card "+r._nativeApp.id)}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publishEvent "+t+" error: "+i,s),r._nativeApp,{proxy:r}),n.onError(i||s||"unknow error in publishEvent")}},AppProxy.prototype.publicComponentEvent=function(t,e,r){var n=this,o=n.getComponent(t);if(o&&o.$_internal_shouldStopBatching)try{"function"==typeof o[e]&&o[e](r)}catch(r){var a=r||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publicComponentEvent "+t+"/"+e+" error: "+i,s),n._nativeApp,{proxy:n}),n._appInstance.onError(i||s||"unknow error in publicComponentEvent")}else n.saveComponentEventBatch(t,e,r)},AppProxy.prototype.onIntersectionObserverEvent=function(t,e,r){var n=this._intersectionObserverManager.getObserver(t);n&&n.invokeCallback(e,r)},AppProxy.prototype.onComponentActivity=function(t,e,r,n){var o,a;componentActivity.call(this,this.resolvedPromise,t,e,r,n);var i=this.getComponent(e);if(i&&i.$_internal_shouldStopBatching){var s=this.componentEventBatch[e];if(this.componentEventBatch[e]=void 0,Array.isArray(s))try{for(var _=__values(s),p=_.next();!p.done;p=_.next()){var c=p.value;this.publicComponentEvent(e,c.eventName,c.data)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}}},AppProxy.prototype.onComponentPropertiesChanged=function(t,e){var r=this,n=r.getComponent(t);try{if(!n)throw new Error("component is not exist, error in onComponentPropertiesChanged");var o=n.properties,a=[];isObject(e)&&(Object.keys(e).forEach((function(t){var r=o[t],i=e[t];r!==i&&(n.data[t]=n.properties[t]=i,a.push([r,i,t]))})),a.length>0&&a.forEach((function(t){var e=__read(t,3),r=e[0],o=e[1],a=e[2],i=n._properties[a]||{},s=i.observer;isObject(i)&&(isString(s)&&(s=n[s]),"function"==typeof s&&s.call(n,o,r))})))}catch(n){var i=n||{},s=i.message,_=i.stack;reportError(new InternalRuntimeError("onComponentPropertiesChanged "+t+"/"+e+" error: "+s,_),r._nativeApp,{proxy:r}),r._appInstance.onError(s||_||"unknow error in onComponentPropertiesChanged")}},AppProxy.prototype.onComponentDatasetChanged=function(t,e){var r=this,n=r.getComponent(t);try{if(!n)throw new Error("component is not exist, error in onComponentDatasetChanged");n.dataset=e}catch(n){var o=n||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("onComponentDataSetChanged "+t+"/"+e+" error: "+a,i),r._nativeApp,{proxy:r}),r._appInstance.onError(a||i||"unknow error in onComponentDataSetChanged")}},AppProxy.prototype.onComponentInstanceChanged=function(t,e){var r=this,n=r.getComponent(t);try{if(!n)throw new Error("component is not exist, error in onComponentInstanceChanged");n.className=e.className,n.idSelector=e.id}catch(n){var o=n||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("onComponentInstanceChanged "+t+"/"+e+" error: "+a,i),r._nativeApp,{proxy:r}),r._appInstance.onError(a||i||"unknow error in onComponentInstanceChanged")}},AppProxy.prototype.updateCardData=function(t,e){var r=this;void 0===e&&(e=UpdateDataType.UPDATE);var n=this;try{var o=n._appInstance;e==UpdateDataType.RESET&&(o.data={__globalProps:o.data.__globalProps},Object.keys(this._initData).forEach((function(t){o.data[t]=r._initData[t]}))),"string"==typeof t&&(t=JSON.parse(t)),Object.keys(t).forEach((function(e){var r=t[e];o.data[e]=r})),"function"==typeof o.onDataChanged&&o.onDataChanged.call(o,t)}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateCardData "+t+" error: "+i,s),n._nativeApp,{proxy:n}),n._appInstance.onError(i||s||"unknow error in updateCardData")}},AppProxy.prototype.processCardConfig=function(t){var e=this;try{var r=e._appInstance;"string"==typeof t&&(t=JSON.parse(t));var n=t.__card_config_;isObject(n)&&Object.keys(n).forEach((function(t){if("theme"===t){var e=n[t];isObject(e)&&(r.theme=e,"function"==typeof r.onThemeChanged&&r.onThemeChanged(e))}}))}catch(r){var o=r||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("processCardConfig "+t+" error: "+a,i),e._nativeApp,{proxy:e}),e._appInstance.onError(a||i||"unknow error in processCardConfig")}},AppProxy.prototype.initCardData=function(t){this._initData=t;var e=this;try{var r=e._appInstance;Object.keys(t).forEach((function(e){hasProperty(r.data,e)||(r.data[e]=t[e])}))}catch(r){var n=r||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("initCardData "+t+" error: "+(o="native initCardData error in Card:  "+o),a),e._nativeApp,{proxy:e}),e._appInstance.onError(o||a||"unknow error in initCardData")}},AppProxy.prototype.onNativeAppReady=function(t){var e=this;try{var r=!0;e.allRemoved&&(r=!e.allRemoved["/"+this._cardPath]),r&&e._nativeApp.updateData(e._appInstance.data),e._appInstance.cardState="ready",e._appInstance.onReady({}),pageLifetimeFun.call(e,"onReady")}catch(t){var n=t||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("onNativeAppReady error: "+o,a),e._nativeApp,{proxy:e}),e._appInstance.onError(o||a||"unknow error in updateCardData")}},AppProxy.prototype.callFunction=function(t,e,r){var n=this,o=this._appInstance;try{var a=o.getJSModule(t);"function"==typeof a[e]&&a[e].apply(a,r)}catch(r){var i=r||{},s=i.message,_=i.stack;reportError(new InternalRuntimeError("callFunction "+t+"/"+e+" error: "+s,_),n._nativeApp,{proxy:n}),n._appInstance.onError(s||_||"unknow error in callFunction")}},AppProxy.prototype.onAppEnterBackground=function(t){var e=this;try{e._appInstance.onHide(),pageLifetimeFun.call(e,"onHide")}catch(t){var r=t||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterBackground error: "+n,o),e._nativeApp,{proxy:e}),e._appInstance.onError(n||o||"unknow error in onAppEnterBackground")}},AppProxy.prototype.onAppEnterForeground=function(t){var e=this;try{e._appInstance.onShow(t),pageLifetimeFun.call(e,"onShow")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterForeground "+t+" error: "+n,o),e._nativeApp,{proxy:e}),e._appInstance.onError(n||o||"unknow error in onAppEnterForeground")}},AppProxy.prototype.onAppError=function(t){var e=this;try{this._appInstance.onError(t),reportError(new InternalRuntimeError("JS error from native: "+t,t),e._nativeApp,{proxy:e})}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppError "+t+" error: "+n,o),e._nativeApp,{proxy:e})}},AppProxy.prototype.onAppFirstScreen=function(t){var e=this;try{this._appInstance.onFirstScreen(t),pageLifetimeFun.call(e,"onFirstScreen")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppFirstScreen "+t+" error: "+n,o),e._nativeApp,{proxy:e}),e._appInstance.onError(n||o||"unknow error in onAppFirstScreen")}},AppProxy.prototype.saveComponentEventBatch=function(t,e,r){this.componentEventBatch[t]||(this.componentEventBatch[t]=[]),this.componentEventBatch[t].push({eventName:e,data:r})},AppProxy}();function pathProcess$1(t){var e=t.match(/(.*)\/([^/]+)?$/);return(null==e?void 0:e[1])?e[1]:"./"}function inRequire$1(t){var e=this,r=pathProcess$1(t);return function(t){var n=[],o=(r+"/"+t).split("/"),a=o.length;if("string"!=typeof t)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+t+" in app: "+e._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var _=n.join("/");return _.endsWith(".js")||(_+=".js"),e.require(_)}}function loadCard(nativeApp,params,lynx){var BDLynxSDKCore=_global.BDLynxSDKCore,apiInit=(BDLynxSDKCore||{}).apiInit,cardType=params.cardType,tt;try{var id=nativeApp.id;if(alog("load card native app id: "+id+" cardType "+cardType),tt="tt"===cardType?new AppProxy({nativeApp:nativeApp,params:params,lynx:lynx}):new ReactApp({nativeApp:nativeApp,params:params,lynx:lynx}),_global.currentAppId=id,_global.multiApps[id]=tt,"function"==typeof apiInit){var apiInstance=apiInit.call(tt);tt.apiList=apiInstance}var contents=nativeApp.readDynamicComponentScripts();if(Array.isArray(contents))for(var i=0;i<contents.length;i++)eval(contents[i]);else"string"==typeof contents&&eval(contents);var appServiceName="app-service.js";if(alog("load card native app load app-service.js params.bundleSupportLoadScript "+params.bundleSupportLoadScript),params.bundleSupportLoadScript){var bundleInitReturnObj=nativeApp.loadScript(appServiceName);if(alog("load card load app-service.js loadScript success"),bundleInitReturnObj&&bundleInitReturnObj.init)bundleInitReturnObj.init({tt:tt}),alog("load card load app-service.js init success");else{var errorMessage="loadCard error: loadScript did not return an function "+bundleInitReturnObj;reportThrowError({error:new InternalRuntimeError(errorMessage),nativeApp:nativeApp,rawError:new Error(errorMessage),proxy:tt})}}else{var jsContent=nativeApp.readScript(appServiceName);eval(jsContent),alog("load card load app-service.js eval success")}nativeApp.setCard(tt)}catch(t){var _a=t||{},message=_a.message,stack=_a.stack;reportThrowError({error:new InternalRuntimeError("loadCard error: "+message,stack),nativeApp:nativeApp,rawError:t,proxy:tt})}}function destroyCard(t){alog("destroy "+t),_global.multiApps[t].destroy(),delete _global.multiApps[t]}function callDestroyLifetimeFun(t){alog("callDestroyLifetimeFun "+t),_global.multiApps[t].callDestroyLifetimeFun()}function loadDynamicComponent(t,e){try{var r=t.nativeApp,n=r.loadScript("app-service.js",e);if(alog("load dynamic component app-service.js loadScript success"),n&&n.init){var o=_global.globDynamicComponentEntry;_global.globDynamicComponentEntry=e,n.init({tt:t}),alog("load dynamic component load app-service.js init success"),_global.globDynamicComponentEntry=o}else{var a="loadCard error: loadScript did not return an function "+n;reportThrowError({error:new InternalRuntimeError(a),nativeApp:r,rawError:new Error(a),proxy:t})}}catch(e){var i=e||{},s=i.message,_=i.stack;reportError(new InternalRuntimeError("loadDynamicComponent error: "+s,_),t.nativeApp,{proxy:t})}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function arrayBufferToBase64(t){var e,r=new Uint8Array(t),n=r.length,o="";for(e=0;e<n;e+=3)o+=chars[r[e]>>2],o+=chars[(3&r[e])<<4|r[e+1]>>4],o+=chars[(15&r[e+1])<<2|r[e+2]>>6],o+=chars[63&r[e+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function base64ToArrayBuffer(t){var e,r,n,o,a,i=.75*t.length,s=t.length,_=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var p=new ArrayBuffer(i),c=new Uint8Array(p);for(e=0;e<s;e+=4)r=lookup[t.charCodeAt(e)],n=lookup[t.charCodeAt(e+1)],o=lookup[t.charCodeAt(e+2)],a=lookup[t.charCodeAt(e+3)],c[_++]=r<<2|n>>4,c[_++]=(15&n)<<4|o>>2,c[_++]=(3&o)<<6|63&a;return p}_global.loadCard=loadCard,_global.destroyCard=destroyCard,_global.callDestroyLifetimeFun=callDestroyLifetimeFun,_global.loadDynamicComponent=loadDynamicComponent,_global.__lynxArrayBufferToBase64=arrayBufferToBase64,_global.__lynxBase64ToArrayBuffer=base64ToArrayBuffer,_global.LynxSDKCore={report:legacyReportError,reportInner:wrapInnerFunction,reportUser:wrapUserFunction}})();
//# sourceMappingURL=lynx_core.js.map
