package com.ss.android.ugc.aweme.upvote.publish.b;

import android.app.Activity;
import android.content.Context;
import android.content.ContextWrapper;
import android.os.Bundle;
import com.bytedance.covode.number.Covode;
import com.bytedance.tux.icon.TuxIconView;
import com.bytedance.tux.input.TuxEditText;
import com.bytedance.tux.input.TuxTextView;
import com.ss.android.ugc.aweme.IAccountUserService;
import com.ss.android.ugc.aweme.base.l;
import com.ss.android.ugc.aweme.base.v;
import com.ss.android.ugc.aweme.common.r;
import com.ss.android.ugc.aweme.profile.model.User;
import com.ss.android.ugc.aweme.upvote.event.UpvotePublishMobParam;
import com.ss.android.ugc.aweme.upvote.publish.a.d;
import com.zhiliaoapp.musically.R;
import h.f.b.m;
import h.h;
import h.i;
import h.z;
import java.util.LinkedHashMap;

public final class a {

    /* renamed from: c  reason: collision with root package name */
    public static final C3801a f142292c = new C3801a((byte) 0);

    /* renamed from: a  reason: collision with root package name */
    public h.f.a.a<z> f142293a;

    /* renamed from: b  reason: collision with root package name */
    final Context f142294b;

    /* renamed from: d  reason: collision with root package name */
    private h.f.a.a<z> f142295d;

    /* renamed from: e  reason: collision with root package name */
    private final h f142296e = i.a((h.f.a.a) new f(this));

    /* renamed from: f  reason: collision with root package name */
    private final String f142297f;

    /* renamed from: g  reason: collision with root package name */
    private final UpvotePublishMobParam f142298g;

    static {
        Covode.recordClassIndex(93050);
    }

    public final com.ss.android.ugc.aweme.upvote.publish.a.d a() {
        return (com.ss.android.ugc.aweme.upvote.publish.a.d) this.f142296e.getValue();
    }

    /* renamed from: com.ss.android.ugc.aweme.upvote.publish.b.a$a  reason: collision with other inner class name */
    public static final class C3801a {
        static {
            Covode.recordClassIndex(93051);
        }

        private C3801a() {
        }

        public /* synthetic */ C3801a(byte b2) {
            this();
        }
    }

    static final class b extends m implements h.f.a.a<z> {
        final /* synthetic */ String $animFile$inlined;
        final /* synthetic */ l $avatarUriModel$inlined;
        final /* synthetic */ String $desc$inlined;
        final /* synthetic */ String $editHint$inlined;
        final /* synthetic */ String $title$inlined;
        final /* synthetic */ a this$0;

        static {
            Covode.recordClassIndex(93052);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        b(a aVar, String str, String str2, String str3, l lVar, String str4) {
            super(0);
            this.this$0 = aVar;
            this.$animFile$inlined = str;
            this.$title$inlined = str2;
            this.$desc$inlined = str3;
            this.$avatarUriModel$inlined = lVar;
            this.$editHint$inlined = str4;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ z invoke() {
            this.this$0.a((String) null);
            return z.f158842a;
        }
    }

    static final class c extends m implements h.f.a.a<z> {
        final /* synthetic */ String $animFile$inlined;
        final /* synthetic */ l $avatarUriModel$inlined;
        final /* synthetic */ String $desc$inlined;
        final /* synthetic */ String $editHint$inlined;
        final /* synthetic */ String $title$inlined;
        final /* synthetic */ a this$0;

        static {
            Covode.recordClassIndex(93053);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        c(a aVar, String str, String str2, String str3, l lVar, String str4) {
            super(0);
            this.this$0 = aVar;
            this.$animFile$inlined = str;
            this.$title$inlined = str2;
            this.$desc$inlined = str3;
            this.$avatarUriModel$inlined = lVar;
            this.$editHint$inlined = str4;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ z invoke() {
            this.this$0.a("üëè");
            return z.f158842a;
        }
    }

    static final class d extends m implements h.f.a.a<z> {
        final /* synthetic */ String $animFile$inlined;
        final /* synthetic */ l $avatarUriModel$inlined;
        final /* synthetic */ String $desc$inlined;
        final /* synthetic */ String $editHint$inlined;
        final /* synthetic */ String $title$inlined;
        final /* synthetic */ a this$0;

        static {
            Covode.recordClassIndex(93054);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        d(a aVar, String str, String str2, String str3, l lVar, String str4) {
            super(0);
            this.this$0 = aVar;
            this.$animFile$inlined = str;
            this.$title$inlined = str2;
            this.$desc$inlined = str3;
            this.$avatarUriModel$inlined = lVar;
            this.$editHint$inlined = str4;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ z invoke() {
            this.this$0.a("üòç");
            return z.f158842a;
        }
    }

    static final class e extends m implements h.f.a.a<z> {
        final /* synthetic */ String $animFile$inlined;
        final /* synthetic */ l $avatarUriModel$inlined;
        final /* synthetic */ String $desc$inlined;
        final /* synthetic */ String $editHint$inlined;
        final /* synthetic */ String $title$inlined;
        final /* synthetic */ a this$0;

        static {
            Covode.recordClassIndex(93055);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        e(a aVar, String str, String str2, String str3, l lVar, String str4) {
            super(0);
            this.this$0 = aVar;
            this.$animFile$inlined = str;
            this.$title$inlined = str2;
            this.$desc$inlined = str3;
            this.$avatarUriModel$inlined = lVar;
            this.$editHint$inlined = str4;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* bridge */ /* synthetic */ z invoke() {
            h.f.a.a<z> aVar = this.this$0.f142293a;
            if (aVar != null) {
                aVar.invoke();
            }
            return z.f158842a;
        }
    }

    static final class f extends m implements h.f.a.a<com.ss.android.ugc.aweme.upvote.publish.a.d> {
        final /* synthetic */ a this$0;

        static {
            Covode.recordClassIndex(93056);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        f(a aVar) {
            super(0);
            this.this$0 = aVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ com.ss.android.ugc.aweme.upvote.publish.a.d invoke() {
            String b2;
            a aVar = this.this$0;
            String str = (String) com.ss.android.ugc.aweme.upvote.b.b.a("upvote_comment_recommended.json", "upvote_comment_reposted.json");
            String b3 = com.ss.android.ugc.aweme.base.utils.h.b(((Number) com.ss.android.ugc.aweme.upvote.b.b.a(Integer.valueOf((int) R.string.f92), Integer.valueOf((int) R.string.fda))).intValue());
            if (!com.ss.android.ugc.aweme.upvote.e.a.b()) {
                b2 = com.ss.android.ugc.aweme.base.utils.h.b(((Number) com.ss.android.ugc.aweme.upvote.b.b.a(Integer.valueOf((int) R.string.f8r), Integer.valueOf((int) R.string.fd7))).intValue());
            } else {
                b2 = com.ss.android.ugc.aweme.base.utils.h.b(((Number) com.ss.android.ugc.aweme.upvote.b.b.a(Integer.valueOf((int) R.string.f93), Integer.valueOf((int) R.string.fdb))).intValue());
            }
            IAccountUserService g2 = com.ss.android.ugc.aweme.account.b.g();
            h.f.b.l.b(g2, "");
            User curUser = g2.getCurUser();
            h.f.b.l.b(curUser, "");
            l a2 = v.a(curUser.getAvatarThumb());
            String b4 = com.ss.android.ugc.aweme.base.utils.h.b(R.string.f8q);
            com.ss.android.ugc.aweme.upvote.publish.a.d dVar = new com.ss.android.ugc.aweme.upvote.publish.a.d(aVar.f142294b, (byte) 0);
            dVar.setAnimFile(str);
            h.f.b.l.b(b3, "");
            dVar.setTitle(b3);
            h.f.b.l.b(b2, "");
            dVar.setDesc(b2);
            dVar.setAvatar(a2);
            h.f.b.l.b(b4, "");
            b bVar = new b(aVar, str, b3, b2, a2, b4);
            h.f.b.l.d(b4, "");
            TuxEditText tuxEditText = (TuxEditText) dVar.findViewById(R.id.axz);
            h.f.b.l.b(tuxEditText, "");
            tuxEditText.setHint(b4);
            tuxEditText.setOnClickListener(new d.a(b4, bVar));
            c cVar = new c(aVar, str, b3, b2, a2, b4);
            h.f.b.l.d("üëè", "");
            TuxTextView tuxTextView = (TuxTextView) dVar.findViewById(R.id.f1s);
            tuxTextView.setText("üëè");
            tuxTextView.setOnClickListener(new d.b("üëè", cVar));
            d dVar2 = new d(aVar, str, b3, b2, a2, b4);
            h.f.b.l.d("üòç", "");
            TuxTextView tuxTextView2 = (TuxTextView) dVar.findViewById(R.id.f69);
            tuxTextView2.setText("üòç");
            tuxTextView2.setOnClickListener(new d.c("üòç", dVar2));
            e eVar = new e(aVar, str, b3, b2, a2, b4);
            h.f.b.l.d(eVar, "");
            ((TuxIconView) dVar.findViewById(R.id.bve)).setOnClickListener(new d.e(eVar));
            if (com.ss.android.ugc.aweme.upvote.e.a.d() < 5) {
                dVar.f142279g = true;
                com.ss.android.ugc.aweme.upvote.e.a.a().storeInt(com.ss.android.ugc.aweme.upvote.e.a.a("publish_anim_shown_count_"), com.ss.android.ugc.aweme.upvote.e.a.d() + 1);
            }
            return dVar;
        }
    }

    public final void a(h.f.a.a<z> aVar) {
        h.f.b.l.d(aVar, "");
        this.f142295d = aVar;
    }

    public final void b(h.f.a.a<z> aVar) {
        h.f.b.l.d(aVar, "");
        this.f142293a = aVar;
    }

    public final void a(String str) {
        boolean z;
        androidx.fragment.app.e eVar;
        Activity activity;
        LinkedHashMap linkedHashMap = new LinkedHashMap();
        linkedHashMap.put("enter_from", this.f142298g.f142213a);
        if (str == null || str.length() == 0) {
            z = true;
        } else {
            z = false;
        }
        if (z) {
            linkedHashMap.put("enter_method", "click_input_box");
        } else {
            linkedHashMap.put("enter_method", "click_emoji");
            linkedHashMap.put("emoji_id", str);
        }
        linkedHashMap.put("group_id", this.f142298g.f142215c);
        linkedHashMap.put("author_id", this.f142298g.f142216d);
        linkedHashMap.put("follow_status", this.f142298g.f142217e);
        r.a("add_recommendation", linkedHashMap);
        h.f.a.a<z> aVar = this.f142295d;
        if (aVar != null) {
            aVar.invoke();
        }
        Context context = this.f142294b;
        while (true) {
            eVar = null;
            if (context != null) {
                if (!(context instanceof Activity)) {
                    if (!(context instanceof ContextWrapper)) {
                        break;
                    }
                    context = ((ContextWrapper) context).getBaseContext();
                } else {
                    activity = (Activity) context;
                    break;
                }
            } else {
                break;
            }
        }
        activity = null;
        if (activity instanceof androidx.fragment.app.e) {
            eVar = activity;
        }
        androidx.fragment.app.e eVar2 = eVar;
        if (eVar2 != null) {
            String str2 = this.f142297f;
            UpvotePublishMobParam upvotePublishMobParam = this.f142298g;
            h.f.b.l.d(str2, "");
            h.f.b.l.d(upvotePublishMobParam, "");
            com.ss.android.ugc.aweme.upvote.publish.a.a aVar2 = new com.ss.android.ugc.aweme.upvote.publish.a.a();
            Bundle bundle = new Bundle();
            bundle.putString("upvote_item_id", str2);
            bundle.putString("emoji_text", str);
            bundle.putParcelable("mob_param", upvotePublishMobParam);
            aVar2.setArguments(bundle);
            aVar2.show(eVar2.getSupportFragmentManager(), "UpvoteCommentDialogFragment");
        }
    }

    public a(Context context, String str, UpvotePublishMobParam upvotePublishMobParam) {
        h.f.b.l.d(context, "");
        h.f.b.l.d(str, "");
        h.f.b.l.d(upvotePublishMobParam, "");
        this.f142294b = context;
        this.f142297f = str;
        this.f142298g = upvotePublishMobParam;
    }
}
