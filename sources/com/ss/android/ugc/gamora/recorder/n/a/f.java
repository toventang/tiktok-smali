package com.ss.android.ugc.gamora.recorder.n.a;

import android.content.Context;
import androidx.lifecycle.t;
import com.bytedance.als.m;
import com.bytedance.covode.number.Covode;
import com.bytedance.scene.c.f;
import com.ss.android.ugc.aweme.property.u;
import com.ss.android.ugc.aweme.shortvideo.ShortVideoContext;
import com.ss.android.ugc.aweme.shortvideo.dh;
import com.ss.android.ugc.tools.utils.r;
import com.zhiliaoapp.musically.R;
import h.f.b.l;
import h.f.b.y;
import h.z;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public final class f extends com.bytedance.als.j<e> implements com.bytedance.o.a, e {

    /* renamed from: a  reason: collision with root package name */
    static final /* synthetic */ h.k.i[] f148114a = {new y(f.class, "recordModeLogicComponent", "getRecordModeLogicComponent()Lcom/ss/android/ugc/aweme/shortvideo/ui/component/RecordModeLogicComponent;", 0), new y(f.class, "recordCommentAndQuestionPanelApi", "getRecordCommentAndQuestionPanelApi()Lcom/ss/android/ugc/aweme/commentStickerPanel/CommentAndQuestionStickerPanelApi;", 0)};

    /* renamed from: b  reason: collision with root package name */
    public final ShortVideoContext f148115b;

    /* renamed from: c  reason: collision with root package name */
    public final e f148116c;

    /* renamed from: d  reason: collision with root package name */
    public final m<Boolean> f148117d;

    /* renamed from: e  reason: collision with root package name */
    public final com.bytedance.scene.group.b f148118e;

    /* renamed from: f  reason: collision with root package name */
    public final b f148119f;

    /* renamed from: g  reason: collision with root package name */
    private final com.ss.android.ugc.aweme.shortvideo.h.a f148120g;

    /* renamed from: h  reason: collision with root package name */
    private final h.h.d f148121h;

    /* renamed from: i  reason: collision with root package name */
    private final h.h.d f148122i;

    /* renamed from: j  reason: collision with root package name */
    private final h.h f148123j;

    /* renamed from: k  reason: collision with root package name */
    private final h.h f148124k;

    /* renamed from: l  reason: collision with root package name */
    private final h.h f148125l;

    /* renamed from: m  reason: collision with root package name */
    private final h.h f148126m;
    private final com.bytedance.o.f n;
    private final int o = R.id.dj5;
    private final List<com.ss.android.ugc.gamora.recorder.n.b> p;
    private final com.ss.android.ugc.gamora.recorder.n.b q;
    private final h.f.a.a<z> r;
    private boolean s;

    static {
        Covode.recordClassIndex(97632);
    }

    private final h e() {
        return (h) this.f148126m.getValue();
    }

    public final com.ss.android.ugc.aweme.commentStickerPanel.d a() {
        return (com.ss.android.ugc.aweme.commentStickerPanel.d) this.f148122i.a(this, f148114a[1]);
    }

    public final com.bytedance.als.k<Boolean> b() {
        return (com.bytedance.als.k) this.f148123j.getValue();
    }

    public final t<Boolean> c() {
        return (t) this.f148124k.getValue();
    }

    public final i d() {
        return (i) this.f148125l.getValue();
    }

    /* Return type fixed from 'com.bytedance.als.b' to match base method */
    @Override // com.bytedance.als.j
    public final /* bridge */ /* synthetic */ e getApiComponent() {
        return this.f148116c;
    }

    @Override // com.bytedance.o.a
    public final com.bytedance.o.f getDiContainer() {
        return this.n;
    }

    static final class a extends h.f.b.m implements h.f.a.a<t<Boolean>> {

        /* renamed from: a  reason: collision with root package name */
        public static final a f148127a = new a();

        static {
            Covode.recordClassIndex(97633);
        }

        a() {
            super(0);
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ t<Boolean> invoke() {
            return new t();
        }
    }

    static final class k extends h.f.b.m implements h.f.a.a<com.bytedance.als.k<Boolean>> {

        /* renamed from: a  reason: collision with root package name */
        public static final k f148134a = new k();

        static {
            Covode.recordClassIndex(97644);
        }

        k() {
            super(0);
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ com.bytedance.als.k<Boolean> invoke() {
            return new com.bytedance.als.k();
        }
    }

    /* renamed from: com.ss.android.ugc.gamora.recorder.n.a.f$f  reason: collision with other inner class name */
    static final class C3994f extends h.f.b.m implements h.f.a.a<z> {
        final /* synthetic */ f this$0;

        static {
            Covode.recordClassIndex(97638);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        C3994f(f fVar) {
            super(0);
            this.this$0 = fVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ z invoke() {
            this.this$0.d().b();
            return z.f158842a;
        }
    }

    static final class i extends h.f.b.m implements h.f.a.a<h> {
        final /* synthetic */ f this$0;

        static {
            Covode.recordClassIndex(97641);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        i(f fVar) {
            super(0);
            this.this$0 = fVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ h invoke() {
            return new h(this.this$0.f148119f, new h.f.a.a<z>(this) {
                /* class com.ss.android.ugc.gamora.recorder.n.a.f.i.AnonymousClass1 */
                final /* synthetic */ i this$0;

                static {
                    Covode.recordClassIndex(97642);
                }

                {
                    this.this$0 = r2;
                }

                /* Return type fixed from 'java.lang.Object' to match base method */
                @Override // h.f.a.a
                public final /* synthetic */ z invoke() {
                    this.this$0.this$0.a(false);
                    return z.f158842a;
                }
            });
        }
    }

    static final class j extends h.f.b.m implements h.f.a.a<i> {
        final /* synthetic */ f this$0;

        static {
            Covode.recordClassIndex(97643);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        j(f fVar) {
            super(0);
            this.this$0 = fVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ i invoke() {
            return new i(this.this$0.f148119f, this.this$0.b(), this.this$0.f148115b);
        }
    }

    static final class g extends h.f.b.m implements h.f.a.a<z> {
        final /* synthetic */ f this$0;

        static {
            Covode.recordClassIndex(97639);
        }

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        g(f fVar) {
            super(0);
            this.this$0 = fVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // h.f.a.a
        public final /* synthetic */ z invoke() {
            com.ss.android.ugc.gamora.recorder.n.b d2;
            int e2 = dh.e(this.this$0.d().s());
            Context s = this.this$0.d().s();
            l.b(s, "");
            if (r.b(s, (float) e2) > i.f148147c && (d2 = this.this$0.f148119f.d()) != null) {
                f fVar = this.this$0;
                fVar.a(fVar.f148119f.c() + 1);
                this.this$0.b(d2);
                this.this$0.d().a().notifyDataSetChanged();
                com.ss.android.ugc.aweme.commentStickerPanel.d a2 = this.this$0.a();
                if (a2 != null) {
                    a2.n();
                }
                this.this$0.d().b();
            }
            return z.f158842a;
        }
    }

    @Override // com.bytedance.als.j
    public final void onCreate() {
        super.onCreate();
        h.f.a.a<z> aVar = this.r;
        if (aVar != null) {
            aVar.invoke();
        }
        this.f148119f.a(this.p);
        this.f148119f.d(this.q);
        this.f148118e.a(this.o, d(), "ToolbarScene");
        this.f148120g.d().a(this, new d(this));
        this.f148120g.a().a(this, new e(this));
        if (!u.a()) {
            com.ss.android.ugc.aweme.commentStickerPanel.net.a.f73277e.a(this, this.f148117d);
        }
        if (u.b()) {
            a(new C3994f(this));
            com.ss.android.ugc.aweme.commentStickerPanel.d a2 = a();
            if (a2 != null) {
                a2.n();
            }
        }
        if (u.c() || u.d()) {
            a(new g(this));
        }
        ((com.ss.android.ugc.aweme.shortvideo.ui.a.j) this.f148121h.a(this, f148114a[0])).f131329d.a(this, new h(this));
    }

    @Override // com.ss.android.ugc.gamora.recorder.n.a.e
    public final void a(int i2) {
        this.f148119f.a(i2);
    }

    static final class b<T> implements m {

        /* renamed from: a  reason: collision with root package name */
        final /* synthetic */ f f148128a;

        static {
            Covode.recordClassIndex(97634);
        }

        b(f fVar) {
            this.f148128a = fVar;
        }

        @Override // androidx.lifecycle.u, com.bytedance.als.m
        public final /* synthetic */ void onChanged(Object obj) {
            this.f148128a.c().setValue(true);
        }
    }

    static final class d<T> implements m {

        /* renamed from: a  reason: collision with root package name */
        final /* synthetic */ f f148131a;

        static {
            Covode.recordClassIndex(97636);
        }

        d(f fVar) {
            this.f148131a = fVar;
        }

        @Override // androidx.lifecycle.u, com.bytedance.als.m
        public final /* synthetic */ void onChanged(Object obj) {
            this.f148131a.b().a((Boolean) obj);
        }
    }

    private final void a(h.f.a.a<z> aVar) {
        c().observe(this, new c(this, aVar));
    }

    public final void b(com.ss.android.ugc.gamora.recorder.n.b bVar) {
        l.d(bVar, "");
        this.f148119f.a(bVar);
    }

    /* access modifiers changed from: package-private */
    public static final class c<T> implements m {

        /* renamed from: a  reason: collision with root package name */
        final /* synthetic */ f f148129a;

        /* renamed from: b  reason: collision with root package name */
        final /* synthetic */ h.f.a.a f148130b;

        static {
            Covode.recordClassIndex(97635);
        }

        c(f fVar, h.f.a.a aVar) {
            this.f148129a = fVar;
            this.f148130b = aVar;
        }

        @Override // androidx.lifecycle.u, com.bytedance.als.m
        public final /* synthetic */ void onChanged(Object obj) {
            com.ss.android.ugc.aweme.commentStickerPanel.d a2 = this.f148129a.a();
            if (a2 != null && (!a2.h() || !a2.i())) {
                this.f148130b.invoke();
            }
            com.ss.android.ugc.aweme.commentStickerPanel.net.a.f73277e.a(this.f148129a.f148117d);
        }
    }

    static final class e<T> implements m {

        /* renamed from: a  reason: collision with root package name */
        final /* synthetic */ f f148132a;

        static {
            Covode.recordClassIndex(97637);
        }

        e(f fVar) {
            this.f148132a = fVar;
        }

        @Override // androidx.lifecycle.u, com.bytedance.als.m
        public final /* synthetic */ void onChanged(Object obj) {
            Boolean bool = (Boolean) obj;
            l.b(bool, "");
            if (!bool.booleanValue() || this.f148132a.f148115b.b()) {
                this.f148132a.f148118e.d(this.f148132a.d());
            } else {
                this.f148132a.f148118e.e(this.f148132a.d());
            }
        }
    }

    @Override // com.ss.android.ugc.gamora.recorder.n.a.e
    public final void a(com.ss.android.ugc.gamora.recorder.n.b bVar) {
        l.d(bVar, "");
        this.f148119f.c(bVar);
    }

    @Override // com.ss.android.ugc.gamora.recorder.n.a.e
    public final void b(List<? extends com.ss.android.ugc.gamora.recorder.n.b> list) {
        l.d(list, "");
        ArrayList arrayList = new ArrayList(this.f148119f.a());
        Iterator<T> it = list.iterator();
        while (it.hasNext()) {
            arrayList.remove(it.next());
        }
        this.f148119f.a(arrayList);
    }

    static final class h<T> implements m {

        /* renamed from: a  reason: collision with root package name */
        final /* synthetic */ f f148133a;

        static {
            Covode.recordClassIndex(97640);
        }

        h(f fVar) {
            this.f148133a = fVar;
        }

        @Override // androidx.lifecycle.u, com.bytedance.als.m
        public final /* synthetic */ void onChanged(Object obj) {
            Boolean bool = (Boolean) obj;
            l.b(bool, "");
            if (bool.booleanValue()) {
                com.ss.android.ugc.gamora.recorder.n.b d2 = this.f148133a.f148119f.d();
                if (d2 != null) {
                    f fVar = this.f148133a;
                    l.d(d2, "");
                    fVar.f148119f.b(d2);
                }
            } else {
                com.ss.android.ugc.gamora.recorder.n.b d3 = this.f148133a.f148119f.d();
                if (d3 != null) {
                    this.f148133a.b(d3);
                }
                com.ss.android.ugc.aweme.commentStickerPanel.d a2 = this.f148133a.a();
                if (a2 != null) {
                    a2.n();
                }
            }
            this.f148133a.d().a().notifyDataSetChanged();
        }
    }

    @Override // com.ss.android.ugc.gamora.recorder.n.a.e
    public final void a(List<? extends com.ss.android.ugc.gamora.recorder.n.b> list) {
        l.d(list, "");
        ArrayList arrayList = new ArrayList(this.f148119f.a());
        arrayList.addAll(list);
        this.f148119f.a(arrayList);
    }

    @Override // com.ss.android.ugc.gamora.recorder.n.a.e
    public final void a(boolean z) {
        if (com.bytedance.scene.ktx.b.a(this.f148118e) != null) {
            com.bytedance.scene.navigation.d a2 = com.bytedance.scene.ktx.b.a(this.f148118e);
            if (a2 == null) {
                l.b();
            }
            if (z) {
                if (d().z()) {
                    this.f148118e.d(d());
                }
                if (!com.ss.android.ugc.aweme.scene.a.a(a2, e())) {
                    h e2 = e();
                    f.a aVar = new f.a();
                    aVar.f42752a = true;
                    aVar.f42754c = new com.bytedance.scene.a.a.b();
                    a2.b(e2, aVar.b());
                }
            } else if (!d().z()) {
                this.f148118e.e(d());
            }
        }
    }

    public f(com.bytedance.scene.group.b bVar, com.bytedance.o.f fVar, List<com.ss.android.ugc.gamora.recorder.n.b> list, com.ss.android.ugc.gamora.recorder.n.b bVar2, h.f.a.a<z> aVar, int i2, b bVar3, boolean z) {
        l.d(bVar, "");
        l.d(fVar, "");
        l.d(list, "");
        l.d(bVar3, "");
        this.f148118e = bVar;
        this.n = fVar;
        this.p = list;
        this.q = bVar2;
        this.r = aVar;
        this.f148119f = bVar3;
        this.s = z;
        this.f148120g = (com.ss.android.ugc.aweme.shortvideo.h.a) getDiContainer().a(com.ss.android.ugc.aweme.shortvideo.h.a.class, (String) null);
        this.f148121h = com.bytedance.o.b.a.a(getDiContainer(), com.ss.android.ugc.aweme.shortvideo.ui.a.j.class);
        this.f148122i = com.bytedance.o.b.a.b(getDiContainer(), com.ss.android.ugc.aweme.commentStickerPanel.d.class);
        this.f148115b = (ShortVideoContext) getDiContainer().a(ShortVideoContext.class, (String) null);
        this.f148116c = this;
        this.f148123j = h.i.a((h.f.a.a) k.f148134a);
        this.f148124k = h.i.a((h.f.a.a) a.f148127a);
        this.f148117d = new b(this);
        this.f148125l = h.i.a((h.f.a.a) new j(this));
        this.f148126m = h.i.a((h.f.a.a) new i(this));
        bVar3.a(i2);
    }
}
